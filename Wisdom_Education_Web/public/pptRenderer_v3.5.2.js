!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PgReader=t():e.PgReader=t()}(self,(function(){return(()=>{var e={669:(e,t,a)=>{e.exports=a(609)},448:(e,t,a)=>{"use strict";var r=a(867),i=a(26),n=a(372),s=a(327),o=a(97),l=a(109),c=a(985),h=a(61);e.exports=function(e){return new Promise((function(t,a){var d=e.data,u=e.headers;r.isFormData(d)&&delete u["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";u.Authorization="Basic "+btoa(p+":"+m)}var g=o(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),s(g,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in f?l(f.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f};i(t,a,n),f=null}},f.onabort=function(){f&&(a(h("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){a(h("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),a(h(t,e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var y=(e.withCredentials||c(g))&&e.xsrfCookieName?n.read(e.xsrfCookieName):void 0;y&&(u[e.xsrfHeaderName]=y)}if("setRequestHeader"in f&&r.forEach(u,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete u[t]:f.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),a(e),f=null)})),d||(d=null),f.send(d)}))}},609:(e,t,a)=>{"use strict";var r=a(867),i=a(849),n=a(321),s=a(185);function o(e){var t=new n(e),a=i(n.prototype.request,t);return r.extend(a,n.prototype,t),r.extend(a,t),a}var l=o(a(655));l.Axios=n,l.create=function(e){return o(s(l.defaults,e))},l.Cancel=a(263),l.CancelToken=a(972),l.isCancel=a(502),l.all=function(e){return Promise.all(e)},l.spread=a(713),l.isAxiosError=a(268),e.exports=l,e.exports.default=l},263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},972:(e,t,a)=>{"use strict";var r=a(263);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var a=this;e((function(e){a.reason||(a.reason=new r(e),t(a.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,a)=>{"use strict";var r=a(867),i=a(327),n=a(782),s=a(572),o=a(185);function l(e){this.defaults=e,this.interceptors={request:new n,response:new n}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=o(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],a=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)a=a.then(t.shift(),t.shift());return a},l.prototype.getUri=function(e){return e=o(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,a){return this.request(o(a||{},{method:e,url:t,data:(a||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,a,r){return this.request(o(r||{},{method:e,url:t,data:a}))}})),e.exports=l},782:(e,t,a)=>{"use strict";var r=a(867);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},97:(e,t,a)=>{"use strict";var r=a(793),i=a(303);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},61:(e,t,a)=>{"use strict";var r=a(481);e.exports=function(e,t,a,i,n){var s=new Error(e);return r(s,t,a,i,n)}},572:(e,t,a)=>{"use strict";var r=a(867),i=a(527),n=a(502),s=a(655);function o(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return o(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return o(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return n(t)||(o(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,a,r,i){return e.config=t,a&&(e.code=a),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},185:(e,t,a)=>{"use strict";var r=a(867);e.exports=function(e,t){t=t||{};var a={},i=["url","method","data"],n=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function l(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function c(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(a[i]=l(void 0,e[i])):a[i]=l(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(a[e]=l(void 0,t[e]))})),r.forEach(n,c),r.forEach(s,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(a[i]=l(void 0,e[i])):a[i]=l(void 0,t[i])})),r.forEach(o,(function(r){r in t?a[r]=l(e[r],t[r]):r in e&&(a[r]=l(void 0,e[r]))}));var h=i.concat(n).concat(s).concat(o),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===h.indexOf(e)}));return r.forEach(d,c),a}},26:(e,t,a)=>{"use strict";var r=a(61);e.exports=function(e,t,a){var i=a.config.validateStatus;a.status&&i&&!i(a.status)?t(r("Request failed with status code "+a.status,a.config,null,a.request,a)):e(a)}},527:(e,t,a)=>{"use strict";var r=a(867);e.exports=function(e,t,a){return r.forEach(a,(function(a){e=a(e,t)})),e}},655:(e,t,a)=>{"use strict";var r=a(867),i=a(16),n={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o,l={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(o=a(448)),o),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(n)})),e.exports=l},849:e=>{"use strict";e.exports=function(e,t){return function(){for(var a=new Array(arguments.length),r=0;r<a.length;r++)a[r]=arguments[r];return e.apply(t,a)}}},327:(e,t,a)=>{"use strict";var r=a(867);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,a){if(!t)return e;var n;if(a)n=a(t);else if(r.isURLSearchParams(t))n=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),n=s.join("&")}if(n){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}},303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},372:(e,t,a)=>{"use strict";var r=a(867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,a,i,n,s){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),r.isString(i)&&o.push("path="+i),r.isString(n)&&o.push("domain="+n),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},268:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},985:(e,t,a)=>{"use strict";var r=a(867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");function i(e){var r=e;return t&&(a.setAttribute("href",r),r=a.href),a.setAttribute("href",r),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname}}return e=i(window.location.href),function(t){var a=r.isString(t)?i(t):t;return a.protocol===e.protocol&&a.host===e.host}}():function(){return!0}},16:(e,t,a)=>{"use strict";var r=a(867);e.exports=function(e,t){r.forEach(e,(function(a,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=a,delete e[r])}))}},109:(e,t,a)=>{"use strict";var r=a(867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,a,n,s={};return e?(r.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=r.trim(e.substr(0,n)).toLowerCase(),a=r.trim(e.substr(n+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([a]):s[t]?s[t]+", "+a:a}})),s):s}},713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},867:(e,t,a)=>{"use strict";var r=a(849),i=Object.prototype.toString;function n(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function o(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===i.call(e)}function h(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(var a=0,r=e.length;a<r;a++)t.call(null,e[a],a,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:n,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isPlainObject:l,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return o(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:h,merge:function e(){var t={};function a(a,r){l(t[r])&&l(a)?t[r]=e(t[r],a):l(a)?t[r]=e({},a):n(a)?t[r]=a.slice():t[r]=a}for(var r=0,i=arguments.length;r<i;r++)h(arguments[r],a);return t},extend:function(e,t,a){return h(t,(function(t,i){e[i]=a&&"function"==typeof t?r(t,a):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},497:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgwIiBoZWlnaHQ9IjM2MCIgdmlld0JveD0iMCAwIDQ4MCAzNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0wIDBINDgwVjM2MEgwVjBaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTQ3OCAySDJWMzU4SDQ3OFYyWk0wIDBWMzYwSDQ4MFYwSDBaIiBmaWxsPSIjRDlEOURCIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTY2LjI5NCAxMjZIMzE1TDMxNSAxODkuMzg2TDI5NS4wNDkgMTY3LjY0QzI5MS4xNDQgMTYzLjM4NCAyODQuNDU2IDE2My4zMTEgMjgwLjQ2IDE2Ny40ODNMMjM4Ljc5MiAyMTAuOTc3TDIxOS45MTcgMTkxLjU3MkMyMTYuNzg0IDE4OC4zNTEgMjExLjYxMyAxODguMzQxIDIwOC40NjggMTkxLjU1MUwxNjcuMzM4IDIzMy41MjlIMTY2LjI5NEwxNjYuMjk0IDEyNlpNMTY2LjI5NCAyNDEuNTI5QzE2NC40NzggMjQxLjUyOSAxNjIuODAzIDI0MC45MjQgMTYxLjQ2IDIzOS45MDRIMTYxLjA5MkwxNjEuMjUyIDIzOS43NDFDMTU5LjQ0NyAyMzguMjc0IDE1OC4yOTQgMjM2LjAzNiAxNTguMjk0IDIzMy41MjlWMTI2QzE1OC4yOTQgMTIxLjU4MiAxNjEuODc2IDExOCAxNjYuMjk0IDExOEgzMTVDMzE5LjQxOCAxMTggMzIzIDEyMS41ODIgMzIzIDEyNlYyMzMuNTI5QzMyMyAyMzcuOTQ4IDMxOS40MTggMjQxLjUyOSAzMTUgMjQxLjUyOUgxNjYuMjk0Wk0yMDEgMTcxLjgwNEMyMDkuMjg0IDE3MS44MDQgMjE2IDE2NS4wODggMjE2IDE1Ni44MDRDMjE2IDE0OC41MiAyMDkuMjg0IDE0MS44MDQgMjAxIDE0MS44MDRDMTkyLjcxNiAxNDEuODA0IDE4NiAxNDguNTIgMTg2IDE1Ni44MDRDMTg2IDE2NS4wODggMTkyLjcxNiAxNzEuODA0IDIwMSAxNzEuODA0WiIgZmlsbD0iI0U2RTdFQiIvPgo8L3N2Zz4K"}},t={};function a(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};return(()=>{"use strict";a.d(r,{default:()=>I});class e{constructor(e,t){this.x=e,this.y=t}angleTo(e){return Math.atan2(e.y-this.y,e.x-this.x)}applyTransform(e){var t=this.x*e[0]+this.y*e[2]+e[4],a=this.x*e[1]+this.y*e[3]+e[5];this.x=t,this.y=a}}class t{constructor(e,t,a,r){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.addPoint(e,t),this.addPoint(a,r)}x(){return this.x1}y(){return this.y1}width(){return this.x2-this.x1}height(){return this.y2-this.y1}addPoint(e,t){null!=e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),null!=t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))}addX(e){this.addPoint(e,null)}addY(e){this.addPoint(null,e)}addBoundingBox(e){this.addPoint(e.x1,e.y1),this.addPoint(e.x2,e.y2)}addQuadraticCurve(e,t,a,r,i,n){var s=e+2/3*(a-e),o=t+2/3*(r-t),l=s+1/3*(i-e),c=o+1/3*(n-t);this.addBezierCurve(e,t,s,l,o,c,i,n)}addBezierCurve(e,t,a,r,i,n,s,o){var l=[e,t],c=[a,r],h=[i,n],d=[s,o];this.addPoint(l[0],l[1]),this.addPoint(d[0],d[1]);for(var u=0;u<=1;u++){var f=function(e){return Math.pow(1-e,3)*l[u]+3*Math.pow(1-e,2)*e*c[u]+3*(1-e)*Math.pow(e,2)*h[u]+Math.pow(e,3)*d[u]},p=6*l[u]-12*c[u]+6*h[u],m=-3*l[u]+9*c[u]-9*h[u]+3*d[u],g=3*c[u]-3*l[u];if(0!=m){var y=Math.pow(p,2)-4*g*m;if(!(y<0)){var b=(-p+Math.sqrt(y))/(2*m);0<b&&b<1&&(0==u&&this.addX(f(b)),1==u&&this.addY(f(b)));var x=(-p-Math.sqrt(y))/(2*m);0<x&&x<1&&(0==u&&this.addX(f(x)),1==u&&this.addY(f(x)))}}else{if(0==p)continue;var P=-g/p;0<P&&P<1&&(0==u&&this.addX(f(P)),1==u&&this.addY(f(P)))}}}isPointInBox(e,t){return this.x1<=e&&e<=this.x2&&this.y1<=t&&t<=this.y2}}class i{static paintPath(a,r){var n,s=i.pathParser;s.reset(r.v);var o=new t;for(null!=a&&a.beginPath();!s.isEnd();)switch(s.nextCommand(),s.command){case"M":case"m":var l=s.getAsCurrentPoint();for(s.addMarker(l),o.addPoint(l.x,l.y),null!=a&&a.moveTo(l.x,l.y),s.start=s.current;!s.isCommandOrEnd();)l=s.getAsCurrentPoint(),s.addMarker(l,s.start),o.addPoint(l.x,l.y),null!=a&&a.lineTo(l.x,l.y);break;case"L":case"l":for(;!s.isCommandOrEnd();){var c=s.current;l=s.getAsCurrentPoint(),s.addMarker(l,c),o.addPoint(l.x,l.y),null!=a&&a.lineTo(l.x,l.y)}break;case"H":case"h":for(;!s.isCommandOrEnd();){var h=new e((s.isRelativeCommand()?s.current.x:0)+s.getScalar(),s.current.y);s.addMarker(h,s.current),s.current=h,o.addPoint(s.current.x,s.current.y),null!=a&&a.lineTo(s.current.x,s.current.y)}break;case"V":case"v":for(;!s.isCommandOrEnd();)h=new e(s.current.x,(s.isRelativeCommand()?s.current.y:0)+s.getScalar()),s.addMarker(h,s.current),s.current=h,o.addPoint(s.current.x,s.current.y),null!=a&&a.lineTo(s.current.x,s.current.y);break;case"C":case"c":for(;!s.isCommandOrEnd();){var d=s.current,u=s.getPoint(),f=s.getAsControlPoint(),p=s.getAsCurrentPoint();s.addMarker(p,f,u),o.addBezierCurve(d.x,d.y,u.x,u.y,f.x,f.y,p.x,p.y),null!=a&&a.bezierCurveTo(u.x,u.y,f.x,f.y,p.x,p.y)}break;case"S":case"s":for(;!s.isCommandOrEnd();)d=s.current,u=s.getReflectedControlPoint(),f=s.getAsControlPoint(),p=s.getAsCurrentPoint(),s.addMarker(p,f,u),o.addBezierCurve(d.x,d.y,u.x,u.y,f.x,f.y,p.x,p.y),null!=a&&a.bezierCurveTo(u.x,u.y,f.x,f.y,p.x,p.y);break;case"Q":case"q":for(;!s.isCommandOrEnd();)d=s.current,f=s.getAsControlPoint(),p=s.getAsCurrentPoint(),s.addMarker(p,f,f),o.addQuadraticCurve(d.x,d.y,f.x,f.y,p.x,p.y),null!=a&&a.quadraticCurveTo(f.x,f.y,p.x,p.y);break;case"T":case"t":for(;!s.isCommandOrEnd();)d=s.current,f=s.getReflectedControlPoint(),s.control=f,p=s.getAsCurrentPoint(),s.addMarker(p,f,f),o.addQuadraticCurve(d.x,d.y,f.x,f.y,p.x,p.y),null!=a&&a.quadraticCurveTo(f.x,f.y,p.x,p.y);break;case"A":case"a":for(;!s.isCommandOrEnd();){d=s.current;var m=s.getScalar(),g=s.getScalar(),y=s.getScalar()*(Math.PI/180),b=s.getScalar()?1:0,x=s.getScalar()?1:0,P=(p=s.getAsCurrentPoint(),new e(Math.cos(y)*(d.x-p.x)/2+Math.sin(y)*(d.y-p.y)/2,-Math.sin(y)*(d.x-p.x)/2+Math.cos(y)*(d.y-p.y)/2)),k=Math.pow(P.x,2)/Math.pow(m,2)+Math.pow(P.y,2)/Math.pow(g,2);k>1&&(m*=Math.sqrt(k),g*=Math.sqrt(k));var M=(b==x?-1:1)*Math.sqrt((Math.pow(m,2)*Math.pow(g,2)-Math.pow(m,2)*Math.pow(P.y,2)-Math.pow(g,2)*Math.pow(P.x,2))/(Math.pow(m,2)*Math.pow(P.y,2)+Math.pow(g,2)*Math.pow(P.x,2)));isNaN(M)&&(M=0);var T=new e(M*m*P.y/g,M*-g*P.x/m),v=new e((d.x+p.x)/2+Math.cos(y)*T.x-Math.sin(y)*T.y,(d.y+p.y)/2+Math.sin(y)*T.x+Math.cos(y)*T.y),I=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))};n=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(I(e)*I(t))};var w=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(n(e,t))},S=w([1,0],[(P.x-T.x)/m,(P.y-T.y)/g]),A=[(P.x-T.x)/m,(P.y-T.y)/g],C=[(-P.x-T.x)/m,(-P.y-T.y)/g],R=w(A,C);n(A,C)<=-1&&(R=Math.PI),n(A,C)>=1&&(R=0);var N=1-x?1:-1,j=S+N*(R/2),D=new e(v.x+m*Math.cos(j),v.y+g*Math.sin(j));if(s.addMarkerAngle(D,j-N*Math.PI/2),s.addMarkerAngle(p,j-N*Math.PI),o.addPoint(p.x,p.y),null!=a&&!isNaN(S)&&!isNaN(R)){n=m>g?m:g;var O=m>g?1:m/g,L=m>g?g/m:1;a.translate(v.x,v.y),a.rotate(y),a.scale(O,L),a.arc(0,0,n,S,S+R,!!(1-x)),a.scale(1/O,1/L),a.rotate(-y),a.translate(-v.x,-v.y)}}break;case"Z":case"z":null!=a&&o.x1!==o.x2&&o.y1!==o.y2&&a.closePath(),s.current=s.start}return o}}i.pathParser=new class{reset(t){this.i=-1,this.command="",this.previousCommand="",this.start=new e(0,0),this.control=new e(0,0),this.current=new e(0,0),this.points=[],this.angles=[],this.tokens=t.split(" ")}isEnd(){return this.i>=this.tokens.length-1}isCommandOrEnd(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)}isRelativeCommand(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1}getToken(){return this.i++,this.tokens[this.i]}getScalar(){return parseFloat(this.getToken())}nextCommand(){this.previousCommand=this.command,this.command=this.getToken()}getPoint(){var t=new e(this.getScalar(),this.getScalar());return this.makeAbsolute(t)}getAsControlPoint(){var e=this.getPoint();return this.control=e,e}getAsCurrentPoint(){var e=this.getPoint();return this.current=e,e}getReflectedControlPoint(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new e(2*this.current.x-this.control.x,2*this.current.y-this.control.y)}makeAbsolute(e){return this.isRelativeCommand()&&(e.x+=this.current.x,e.y+=this.current.y),e}addMarker(e,t,a){null!=a&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(a)),this.addMarkerAngle(e,null==t?null:t.angleTo(e))}addMarkerAngle(e,t){this.points.push(e),this.angles.push(t)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var e=0;e<this.angles.length;e++)if(null==this.angles[e])for(var t=e+1;t<this.angles.length;t++)if(null!=this.angles[t]){this.angles[e]=this.angles[t];break}return this.angles}};let n=(e,t)=>{let a=Object.create(null),r=t.split(" ");for(let t=0;t<r.length;t++)switch(r[t]){case"m":case"M":a.x=Number.parseFloat(r[t+1]),a.y=Number.parseFloat(r[t+2]),e.moveTo(Number.parseFloat(r[t+1]),Number.parseFloat(r[t+2])),t+=2;break;case"l":case"L":a.x=Number.parseFloat(r[t+1]),a.y=Number.parseFloat(r[t+2]),e.lineTo(Number.parseFloat(r[t+1]),Number.parseFloat(r[t+2])),t+=2;break;case"h":case"H":a.x=Number.parseFloat(r[t+1]),e.lineTo(a.x,a.y),t+=1;break;case"v":case"V":a.y=Number.parseFloat(r[t+1]),e.lineTo(a.x,a.y),t+=1;break;case"c":case"C":a.x=Number.parseFloat(r[t+5]),a.y=Number.parseFloat(r[t+6]),e.bezierCurveTo(Number.parseFloat(r[t+1]),Number.parseFloat(r[t+2]),Number.parseFloat(r[t+3]),Number.parseFloat(r[t+4]),Number.parseFloat(r[t+5]),Number.parseFloat(r[t+6])),t+=6;break;case"s":case"S":e.bezierCurveTo(a.x,a.y,Number.parseFloat(r[t+1]),Number.parseFloat(r[t+2]),Number.parseFloat(r[t+3]),Number.parseFloat(r[t+4])),a.x=Number.parseFloat(r[t+3]),a.y=Number.parseFloat(r[t+4]),t+=4;break;case"q":case"Q":a.x=Number.parseFloat(r[t+3]),a.y=Number.parseFloat(r[t+4]),e.quadraticCurveTo(Number.parseFloat(r[t+1]),Number.parseFloat(r[t+2]),Number.parseFloat(r[t+3]),Number.parseFloat(r[t+4])),t+=4;break;case"t":case"T":e.quadraticCurveTo(a.x,a.y,Number.parseFloat(r[t+1]),Number.parseFloat(r[t+2])),a.x=Number.parseFloat(r[t+1]),a.y=Number.parseFloat(r[t+2]),t+=2;break;case"a":case"A":break;case"z":case"Z":e.closePath()}},s=(e,t,a,r,i)=>{let s,o=t.paintInfo?t.paintInfo.colors:t.colors,l=t.paintInfo?t.paintInfo.intervals:t.intervals,h=t.paintInfo?t.paintInfo.gradientType:t.gradientType,d=t.paintInfo?t.paintInfo.textureIndex:t.textureIndex,u=a[0],f=a[1],p=a[2],m=a[3],g=[];if("stroke"!=i&&(e.save(),e.beginPath(),n(e,r),e.clip()),t.ctm&&e.transform(t.ctm[0],t.ctm[1],t.ctm[2],t.ctm[3],t.ctm[4],t.ctm[5]),0==h)switch(e.beginPath(),d){case 0:s=e.createLinearGradient(0,f,0,f+m),g.push(s),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.rect(u,f,p,m),e.fill()):(e.strokeStyle=s,e.rect(u,f,p,m),e.stroke());break;case 1:s=e.createLinearGradient(0,f+m,0,f),g.push(s),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.rect(u,f,p,m),e.fill()):(e.strokeStyle=s,e.rect(u,f,p,m),e.stroke());break;case 2:let t=e.createLinearGradient(0,f+m,0,f+m/2);s=e.createLinearGradient(0,f,0,f+m/2),g.push(s,t),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.rect(u,f,p,m/2),e.fill(),e.beginPath(),e.fillStyle=t,e.rect(u,f+m/2,p,m/2),e.fill()):(e.strokeStyle=s,e.rect(u,f,p,m/2),e.stroke(),e.beginPath(),e.strokeStyle=t,e.rect(u,f+m/2,p,m/2),e.stroke());break;case 3:let a=e.createLinearGradient(0,f+m/2,0,f+m);s=e.createLinearGradient(0,f+m/2,0,f),g.push(s,a),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.rect(u,f,p,m/2),e.fill(),e.beginPath(),e.fillStyle=a,e.rect(u,f+m/2,p,m/2),e.fill()):(e.strokeStyle=s,e.rect(u,f,p,m/2),e.stroke(),e.beginPath(),e.strokeStyle=a,e.rect(u,f+m/2,p,m/2),e.stroke())}else if(1==h)switch(e.beginPath(),d){case 0:s=e.createLinearGradient(u,0,u+p,0),g.push(s),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.rect(u,f,p,m),e.fill()):(e.strokeStyle=s,e.rect(u,f,p,m),e.stroke());break;case 1:s=e.createLinearGradient(u+p,0,u,0),g.push(s),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.rect(u,f,p,m),e.fill()):(e.strokeStyle=s,e.rect(u,f,p,m),e.stroke());break;case 2:let t=e.createLinearGradient(u+p,0,u+p/2,0);s=e.createLinearGradient(u,0,u+p/2,0),g.push(s,t),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.rect(u,f,p/2,m),e.fill(),e.beginPath(),e.fillStyle=t,e.rect(u+p/2,f,p/2,m),e.fill()):(e.strokeStyle=s,e.rect(u,f,p/2,m),e.stroke(),e.beginPath(),e.strokeStyle=t,e.rect(u+p/2,f,p/2,m),e.stroke());break;case 3:let a=e.createLinearGradient(u+p/2,0,u+p,0);s=e.createLinearGradient(u+p/2,0,u,0),g.push(s,a),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.rect(u,f,p/2,m),e.fill(),e.beginPath(),e.fillStyle=a,e.rect(u+p/2,f,p/2,m),e.fill()):(e.strokeStyle=s,e.rect(u,f,p/2,m),e.stroke(),e.beginPath(),e.strokeStyle=a,e.rect(u+p/2,f,p/2,m),e.stroke())}else if(2==h)switch(e.beginPath(),d){case 0:let t=Math.sqrt(Math.pow(p,2)+Math.pow(m,2)),a=p*m/t,r=Math.sqrt(Math.pow(m,2)-Math.pow(a,2)),n=t-2*r,h=f-r,d=u+Math.sqrt(Math.abs(Math.pow(n,2)-Math.pow(r,2)));s=e.createLinearGradient(d,h,u+p,f+m),g.push(s),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.fillRect(u,f,p,m)):(e.strokeStyle=s,e.strokeRect(u,f,p,m));break;case 1:let y=Math.sqrt(Math.pow(p,2)+Math.pow(m,2)),b=p*m/y,x=Math.sqrt(Math.pow(m,2)-Math.pow(b,2)),P=y-2*x,k=f-x,M=u+Math.sqrt(Math.abs(Math.pow(P,2)-Math.pow(x,2)));s=e.createLinearGradient(u+p,f+m,M,k),g.push(s),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.fillRect(u,f,p,m)):(e.strokeStyle=s,e.strokeRect(u,f,p,m));break;case 2:let T=p*m/Math.sqrt(Math.pow(p,2)+Math.pow(m,2)),v=Math.sqrt(Math.pow(p,2)-Math.pow(T,2)),I=T*v/p,w=Math.sqrt(Math.pow(v,2)-Math.pow(I,2)),S=u+w,A=f+(m-I),C=u+(p-w),R=f+I,N=e.createLinearGradient(u,f,C,R);s=e.createLinearGradient(u+p,f+m,S,A),g.push(s,N),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.beginPath(),e.moveTo(u,f+m),e.lineTo(u+p,f+m),e.lineTo(u+p,f),e.closePath(),e.fill(),e.fillStyle=N,e.beginPath(),e.moveTo(u+p,f),e.lineTo(u,f),e.lineTo(u,f+m),e.closePath(),e.fill()):(e.strokeStyle=s,e.beginPath(),e.moveTo(u,f+m),e.lineTo(u+p,f+m),e.lineTo(u+p,f),e.closePath(),e.stroke(),e.strokeStyle=N,e.beginPath(),e.moveTo(u+p,f),e.lineTo(u,f),e.lineTo(u,f+m),e.closePath(),e.stroke());break;case 3:let j=p*m/Math.sqrt(Math.pow(p,2)+Math.pow(m,2)),D=Math.sqrt(Math.pow(p,2)-Math.pow(j,2)),O=j*D/p,L=Math.sqrt(Math.pow(D,2)-Math.pow(O,2)),E=u+L,F=f+(m-O),z=u+(p-L),G=f+O,q=e.createLinearGradient(z,G,u,f);s=e.createLinearGradient(E,F,u+p,f+m),g.push(s,q),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.beginPath(),e.moveTo(u,f+m),e.lineTo(u+p,f+m),e.lineTo(u+p,f),e.closePath(),e.fill(),e.fillStyle=q,e.beginPath(),e.moveTo(u+p,f),e.lineTo(u,f),e.lineTo(u,f+m),e.closePath(),e.fill()):(e.strokeStyle=s,e.beginPath(),e.moveTo(u,f+m),e.lineTo(u+p,f+m),e.lineTo(u+p,f),e.closePath(),e.stroke(),e.strokeStyle=q,e.beginPath(),e.moveTo(u+p,f),e.lineTo(u,f),e.lineTo(u,f+m),e.closePath(),e.stroke())}else if(3==h)switch(d){case 0:let t=Math.sqrt(Math.pow(p,2)+Math.pow(m,2)),a=p*m/t,r=Math.sqrt(Math.pow(m,2)-Math.pow(a,2)),n=t-2*r,h=f-r,d=u+(p-Math.sqrt(Math.abs(Math.pow(n,2)-Math.pow(r,2))));s=e.createLinearGradient(d,h,u,f+m),g.push(s),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.fillRect(u,f,p,m)):(e.strokeStyle=s,e.strokeRect(u,f,p,m));break;case 1:let y=Math.sqrt(Math.pow(p,2)+Math.pow(m,2)),b=p*m/y,x=Math.sqrt(Math.pow(m,2)-Math.pow(b,2)),P=y-2*x,k=f-x,M=u+(p-Math.sqrt(Math.abs(Math.pow(P,2)-Math.pow(x,2))));s=e.createLinearGradient(u,f+m,M,k),g.push(s),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.fillRect(u,f,p,m)):(e.strokeStyle=s,e.strokeRect(u,f,p,m));break;case 2:let T=p*m/Math.sqrt(Math.pow(p,2)+Math.pow(m,2)),v=Math.sqrt(Math.pow(p,2)-Math.pow(T,2)),I=T*v/p,w=Math.sqrt(Math.pow(v,2)-Math.pow(I,2)),S=u+(p-w),A=f+(m-I),C=u+w,R=f+I,N=e.createLinearGradient(u+p,f,C,R);s=e.createLinearGradient(u,f+m,S,A),g.push(s,N),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.beginPath(),e.moveTo(u+p,f+m),e.lineTo(u,f+m),e.lineTo(u,f),e.closePath(),e.fill(),e.fillStyle=N,e.beginPath(),e.moveTo(u,f),e.lineTo(u+p,f),e.lineTo(u+p,f+m),e.closePath(),e.fill()):(e.strokeStyle=s,e.beginPath(),e.moveTo(u+p,f+m),e.lineTo(u,f+m),e.lineTo(u,f),e.closePath(),e.stroke(),e.strokeStyle=N,e.beginPath(),e.moveTo(u,f),e.lineTo(u+p,f),e.lineTo(u+p,f+m),e.closePath(),e.stroke());break;case 3:let j=p*m/Math.sqrt(Math.pow(p,2)+Math.pow(m,2)),D=Math.sqrt(Math.pow(p,2)-Math.pow(j,2)),O=j*D/p,L=Math.sqrt(Math.pow(D,2)-Math.pow(O,2)),E=u+(p-L),F=f+(m-O),z=u+L,G=f+O,q=e.createLinearGradient(z,G,u+p,f);s=e.createLinearGradient(E,F,u,f+m),g.push(s,q),c(o,l,g),"stroke"!=i?(e.fillStyle=s,e.beginPath(),e.moveTo(u+p,f+m),e.lineTo(u,f+m),e.lineTo(u,f),e.closePath(),e.fill(),e.fillStyle=q,e.beginPath(),e.moveTo(u,f),e.lineTo(u+p,f),e.lineTo(u+p,f+m),e.closePath(),e.fill()):(e.strokeStyle=s,e.beginPath(),e.moveTo(u+p,f+m),e.lineTo(u,f+m),e.lineTo(u,f),e.closePath(),e.stroke(),e.strokeStyle=q,e.beginPath(),e.moveTo(u,f),e.lineTo(u+p,f),e.lineTo(u+p,f+m),e.closePath(),e.stroke())}else if(4==h){let t;switch(d){case 0:s=e.createLinearGradient(0,f,0,f+m),t=e.createLinearGradient(u,0,u+p,0),g.push(s,t),c(o,l,g),e.beginPath(),e.moveTo(u,f),e.lineTo(u+p,f+m),e.lineTo(u,f+m),e.closePath(),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke()),e.moveTo(u,f),e.lineTo(u+p,f+m),e.lineTo(u+p,f),e.closePath(),"stroke"!=i?(e.fillStyle=t,e.fill()):(e.strokeStyle=t,e.stroke());break;case 1:s=e.createLinearGradient(u+p,0,u,0),t=e.createLinearGradient(0,f,0,f+m),g.push(s,t),c(o,l,g),e.beginPath(),e.moveTo(u+p,f),e.lineTo(u,f+m),e.lineTo(u,f),e.closePath(),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke()),e.beginPath(),e.moveTo(u+p,f),e.lineTo(u,f+m),e.lineTo(u+p,f+m),e.closePath(),"stroke"!=i?(e.fillStyle=t,e.fill()):(e.strokeStyle=t,e.stroke());break;case 2:s=e.createLinearGradient(0,f+m,0,f),t=e.createLinearGradient(u,0,u+p,0),g.push(s,t),c(o,l,g),e.beginPath(),e.moveTo(u,f+m),e.lineTo(u+p,f),e.lineTo(u,f),e.closePath(),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke()),e.beginPath(),e.moveTo(u,f+m),e.lineTo(u+p,f),e.lineTo(u+p,f+m),e.closePath(),"stroke"!=i?(e.fillStyle=t,e.fill()):(e.strokeStyle=t,e.stroke());break;case 3:s=e.createLinearGradient(u+p,0,u,0),t=e.createLinearGradient(0,f+m,0,f),g.push(s,t),c(o,l,g),e.beginPath(),e.moveTo(u+p,f+m),e.lineTo(u,f),e.lineTo(u,f+m),e.closePath(),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke()),e.beginPath(),e.moveTo(u+p,f+m),e.lineTo(u,f),e.lineTo(u+p,f),e.closePath(),"stroke"!=i?(e.fillStyle=t,e.fill()):(e.strokeStyle=t,e.stroke());break;case 6:let a,r;s=e.createLinearGradient(u+p/2,0,u,0),t=e.createLinearGradient(0,f+m/2,0,f),a=e.createLinearGradient(u+p/2,0,u+p,0),r=e.createLinearGradient(0,f+m/2,0,f+m),g.push(s,t,a,r),c(o,l,g),e.beginPath(),e.moveTo(u+p/2,f+m/2),e.lineTo(u,f),e.lineTo(u,f+m),e.closePath(),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke()),e.beginPath(),e.moveTo(u+p/2,f+m/2),e.lineTo(u+p,f),e.lineTo(u,f),e.closePath(),"stroke"!=i?(e.fillStyle=t,e.fill()):(e.strokeStyle=t,e.stroke()),e.beginPath(),e.moveTo(u+p/2,f+m/2),e.lineTo(u+p,f),e.lineTo(u+p,f+m),e.closePath(),"stroke"!=i?(e.fillStyle=a,e.fill()):(e.strokeStyle=a,e.stroke()),e.beginPath(),e.moveTo(u+p/2,f+m/2),e.lineTo(u,f+m),e.lineTo(u+p,f+m),e.closePath(),"stroke"!=i?(e.fillStyle=r,e.fill()):(e.strokeStyle=r,e.stroke())}}else if(5==h){let t,a,r;switch(d){case 0:s=e.createLinearGradient(u+p/2,0,u,0),t=e.createLinearGradient(0,f+m/2,0,f),a=e.createLinearGradient(u+p/2,0,u+p,0),r=e.createLinearGradient(0,f+m/2,0,f+m),g.push(s,t,a,r),c(o,l,g),e.beginPath(),e.moveTo(u+p/2,f+m/2),e.lineTo(u,f),e.lineTo(u,f+m),e.closePath(),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke()),e.beginPath(),e.moveTo(u+p/2,f+m/2),e.lineTo(u+p,f),e.lineTo(u,f),e.closePath(),"stroke"!=i?(e.fillStyle=t,e.fill()):(e.strokeStyle=t,e.stroke()),e.beginPath(),e.moveTo(u+p/2,f+m/2),e.lineTo(u+p,f),e.lineTo(u+p,f+m),e.closePath(),"stroke"!=i?(e.fillStyle=a,e.fill()):(e.strokeStyle=a,e.stroke()),e.beginPath(),e.moveTo(u+p/2,f+m/2),e.lineTo(u,f+m),e.lineTo(u+p,f+m),e.closePath(),"stroke"!=i?(e.fillStyle=r,e.fill()):(e.strokeStyle=r,e.stroke());break;case 1:s=e.createLinearGradient(u,0,u+p/2,0),t=e.createLinearGradient(0,f,0,f+m/2),a=e.createLinearGradient(u+p,0,u+p/2,0),r=e.createLinearGradient(0,f+m,0,f+m/2),g.push(s,t,a,r),c(o,l,g),e.beginPath(),e.moveTo(u+p/2,f+m/2),e.lineTo(u,f),e.lineTo(u,f+m),e.closePath(),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke()),e.beginPath(),e.moveTo(u+p/2,f+m/2),e.lineTo(u+p,f),e.lineTo(u,f),e.closePath(),"stroke"!=i?(e.fillStyle=t,e.fill()):(e.strokeStyle=t,e.stroke()),e.beginPath(),e.moveTo(u+p/2,f+m/2),e.lineTo(u+p,f),e.lineTo(u+p,f+m),e.closePath(),"stroke"!=i?(e.fillStyle=a,e.fill()):(e.strokeStyle=a,e.stroke()),e.beginPath(),e.moveTo(u+p/2,f+m/2),e.lineTo(u,f+m),e.lineTo(u+p,f+m),e.closePath(),"stroke"!=i?(e.fillStyle=r,e.fill()):(e.strokeStyle=r,e.stroke())}}"stroke"!=i&&e.restore()},o=(e,t,a,r,i)=>{let s,o=t.paintInfo?t.paintInfo.colors:t.colors,d=t.paintInfo?t.paintInfo.intervals:t.intervals,u=t.paintInfo?t.paintInfo.gradientType:t.gradientType,f=t.paintInfo?t.paintInfo.direction:t.direction,p=a[0],m=a[1],g=a[2],y=a[3],b=[];if("stroke"!=i&&(e.save(),e.beginPath(),n(e,r),e.clip()),t.ctm&&e.transform(t.ctm[0],t.ctm[1],t.ctm[2],t.ctm[3],t.ctm[4],t.ctm[5]),0==u){let a,r,n,h,u=t.paintInfo?t.paintInfo.angle:t.angle;e.beginPath(),90==u||270==u?(s=e.createLinearGradient(0,m,0,m+y),b.push(s),c(o,d,b),e.translate(p+g/2,m+y/2),e.rotate((u-90)*Math.PI/180),e.translate(-(p+g/2),-(m+y/2)),e.rect(p,m,g,y)):(s=e.createLinearGradient(p,0,p+g,0),b.push(s),c(o,d,b),e.translate(p+g/2,m+y/2),e.rotate(u*Math.PI/180),e.translate(-(p+g/2),-(m+y/2)),a=l(g/2,y/2,u%180),r=l(g/2,-y/2,u%180),n=Math.max(Math.abs(a[0]),Math.abs(r[0]),g/2),h=Math.max(Math.abs(a[1]),Math.abs(r[1]),y/2),e.rect(p+g/2-n,m+y/2-h,2*n,2*h)),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke())}else if(1==u){let t=Math.abs(y>g?g:y);switch(e.beginPath(),f){case 4:s=e.createRadialGradient(p+g,m+y,t/8,p+g,m+y,t);break;case 5:s=e.createRadialGradient(p,m+y,t/8,p,m+y,t);break;case 6:s=e.createRadialGradient(p+g/2,m+y/2,t/100,p+g/2,m+y/2,t);break;case 7:s=e.createRadialGradient(p+g,m,t/8,p+g,m,t);break;case 8:s=e.createRadialGradient(p,m,t/8,p,m,t)}b.push(s),h(o,d,b),e.rect(p,m,g,y),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke())}else if(2==u){let t;switch(f){case 4:s=e.createLinearGradient(p+g,0,p,0),t=e.createLinearGradient(0,m+y,0,m),b.push(s,t),h(o,d,b),e.beginPath(),e.moveTo(p+g,m+y),e.lineTo(p,m),e.lineTo(p,m+y),e.closePath(),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke()),e.beginPath(),e.moveTo(p+g,m+y),e.lineTo(p,m),e.lineTo(p+g,m),e.closePath(),"stroke"!=i?(e.fillStyle=t,e.fill()):(e.strokeStyle=t,e.stroke());break;case 5:s=e.createLinearGradient(0,m+y,0,m),t=e.createLinearGradient(p,0,p+g,0),b.push(s,t),h(o,d,b),e.beginPath(),e.moveTo(p,m+y),e.lineTo(p+g,m),e.lineTo(p,m),e.closePath(),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke()),e.beginPath(),e.moveTo(p,m+y),e.lineTo(p+g,m),e.lineTo(p+g,m+y),e.closePath(),"stroke"!=i?(e.fillStyle=t,e.fill()):(e.strokeStyle=t,e.stroke());break;case 6:let a,r;s=e.createLinearGradient(p+g/2,0,p,0),t=e.createLinearGradient(0,m+y/2,0,m),a=e.createLinearGradient(p+g/2,0,p+g,0),r=e.createLinearGradient(0,m+y/2,0,m+y),b.push(s,t,a,r),h(o,d,b),e.beginPath(),e.moveTo(p+g/2,m+y/2),e.lineTo(p,m),e.lineTo(p,m+y),e.closePath(),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke()),e.beginPath(),e.moveTo(p+g/2,m+y/2),e.lineTo(p+g,m),e.lineTo(p,m),e.closePath(),"stroke"!=i?(e.fillStyle=t,e.fill()):(e.strokeStyle=t,e.stroke()),e.beginPath(),e.moveTo(p+g/2,m+y/2),e.lineTo(p+g,m),e.lineTo(p+g,m+y),e.closePath(),"stroke"!=i?(e.fillStyle=a,e.fill()):(e.strokeStyle=a,e.stroke()),e.beginPath(),e.moveTo(p+g/2,m+y/2),e.lineTo(p,m+y),e.lineTo(p+g,m+y),e.closePath(),"stroke"!=i?(e.fillStyle=r,e.fill()):(e.strokeStyle=r,e.stroke());break;case 7:s=e.createLinearGradient(p+g,0,p,0),t=e.createLinearGradient(0,m,0,m+y),b.push(s,t),h(o,d,b),e.beginPath(),e.moveTo(p+g,m),e.lineTo(p,m+y),e.lineTo(p,m),e.closePath(),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke()),e.beginPath(),e.moveTo(p+g,m),e.lineTo(p,m+y),e.lineTo(p+g,m+y),e.closePath(),"stroke"!=i?(e.fillStyle=t,e.fill()):(e.strokeStyle=t,e.stroke());break;case 8:s=e.createLinearGradient(0,m,0,m+y),t=e.createLinearGradient(p,0,p+g,0),b.push(s,t),h(o,d,b),e.beginPath(),e.moveTo(p,m),e.lineTo(p+g,m+y),e.lineTo(p,m+y),e.closePath(),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke()),e.beginPath(),e.moveTo(p,m),e.lineTo(p+g,m+y),e.lineTo(p+g,m),e.closePath(),"stroke"!=i?(e.fillStyle=t,e.fill()):(e.strokeStyle=t,e.stroke())}}else if(3==u){let t=Math.abs(y>g?g:y);e.beginPath(),s=e.createRadialGradient(p+g/2,m+y/2,t/600,p+g/2,m+y/2,t),b.push(s),h(o,d,b),e.rect(p,m,g,y),"stroke"!=i?(e.fillStyle=s,e.fill()):(e.strokeStyle=s,e.stroke())}"stroke"!=i&&e.restore()},l=(e,t,a)=>{let r=new Array;return r[0]=e*Math.cos(a*Math.PI/180)+t*Math.sin(a*Math.PI/180),r[1]=-e*Math.sin(a*Math.PI/180)+t*Math.cos(a*Math.PI/180),r},c=(e,t,a)=>{if(e.length>t.length){let r=0;for(let i=0;i<e.length&&!(r>1);i++){for(let t of a)t.addColorStop(r,`rgba(${e[i].r},${e[i].g},${e[i].b},${e[i].alpha/255||.1})`);r+=Math.round(10*t[i])/10}}else for(let r=0;r<e.length;r++)for(let i of a)i.addColorStop(t[r],`rgba(${e[r].r},${e[r].g},${e[r].b},${e[r].alpha/255||.1})`)},h=(e,t,a)=>{for(let r=0;r<e.length;r++)for(let i of a)i.addColorStop(t[r],`rgba(${e[r].r},${e[r].g},${e[r].b},${e[r].alpha/255||.1})`)};class d{constructor(e){this.randomList=[2,19,26,9,1,18,8,15,23,21,20,30,38,25,4,6,29,14,11,7,12,0,5,10,13,17,22,33],this.pgReader=e,this._$Status=Object.create(null),this._$Status.other=Object.create(null),this.u_presentation=Object.create(null),this.u_presentation._$U_A_Cons=Object.create(null)}play(e){let t=e.slide,a=e.animInfo,r=e.shape;r&&this.animHandler(this._$Status,r,e.g,e.count,a.animIdx,a.animType,a.endTime,a.direct,a.emphAttr,t,a.textInfo,a.oldParaIdx,a.paraIdx)}animHandler(e,t,a,r,i,n,s,o,l,c,h,d,u){let f=t.shapeRect,p=t.textRect,m=f.x,g=f.y,y=f.width,b=f.height,x=p.x,P=p.y,k=p.width,M=p.height,T=this.pgReader.doc.pagesize.width,v=this.pgReader.doc.pagesize.height,I=e.other.animDis,w=(this.u_presentation,this);if(0!=n)return 1==n?16==i?S():24==i?(a.globalAlpha=r<=30*s?1-1/(30*s)*r:1/(30*s)*(r-30*s),void(l&&r<60*s&&(a.fillStyle=`rgb(${l.r},${l.g},${l.b})`,a.strokeStyle=d<=0?"#000001":"#000002"))):23==i?(h?a.translate(h[0]+h[2]/2,h[1]+h[3]/2):a.translate(R(t).x,R(t).y),r<=60*s/8?a.rotate(-Math.PI/45/(60*s/8)*r):r>60*s/8&&r<=60*s*3/8?a.rotate(-Math.PI/45+Math.PI/45/(60*s/4)*(r-60*s/8)):r>60*s*3/8&&r<=60*s*5/8?a.rotate(Math.PI/45-Math.PI/45/(60*s/4)*(r-60*s*3/8)):r>60*s*5/8&&r<=60*s*7/8?a.rotate(-Math.PI/45+Math.PI/45/(60*s/4)*(r-60*s*5/8)):a.rotate(Math.PI/45-Math.PI/45/(60*s/8)*(r-60*s*7/8)),void(h?a.translate(-h[0]-h[2]/2,-h[1]-h[3]/2):a.translate(-R(t).x,-R(t).y))):8==i?function(){if(h)var e=h[0],t=h[1],i=h[2],n=h[3];else e=m,t=g,i=y,n=b;var l=e+i/2,c=t+n/2,d=o[0],u=o[1];switch(a.translate(l,c),d){case 0:a.rotate(Math.PI*(u/180)/(60*s)*r);break;case 1:a.rotate(-Math.PI*(u/180)/(60*s)*r)}a.translate(-l,-c)}():0==i?function(){if(h)var e=h[0],t=h[1],i=h[2],n=h[3];else e=m,t=g,i=y,n=b;var l=e+i/2,c=t+n/2,d=o[0],u=o[1];switch(d){case 0:a.translate(l-l*(1-(1-u)/(60*s)*r),0),a.scale(1-(1-u)/(60*s)*r,1);break;case 1:a.translate(0,c-c*(1-(1-u)/(60*s)*r)),a.scale(1,1-(1-u)/(60*s)*r);break;case 2:a.translate(l-l*(1-(1-u)/(60*s)*r),c-c*(1-(1-u)/(60*s)*r)),a.scale(1-(1-u)/(60*s)*r,1-(1-u)/(60*s)*r)}}():12==i?function(){let{br:e,bg:t,bb:i,fr:n,fb:o,fg:c}=l,h=Math.floor((t-c)/(60*s)*r+c),d=Math.floor((e-n)/(60*s)*r+n),f=Math.floor((i-o)/(60*s)*r+o);a.fillStyle=`rgb(${d}, ${h}, ${f})`,a.strokeStyle=u<0?"#000001":"#000002"}():19==i?function(){let{br:e,bg:t,bb:i,fr:n,fb:o,fg:c}=l,h=Math.floor((t-c)/(60*s)*r+c),d=Math.floor((e-n)/(60*s)*r+n),f=Math.floor((i-o)/(60*s)*r+o);a.fillStyle=`rgb(${d}, ${h}, ${f})`,a.strokeStyle=u<0?"#000002":"#000001"}():9==i?function(){let{br:e,bg:t,bb:i,fr:n,fb:o,fg:c}=l,h=Math.floor((t-c)/(60*s)*r+c),d=Math.floor((e-n)/(60*s)*r+n),f=Math.floor((i-o)/(60*s)*r+o);a.fillStyle=`rgb(${d}, ${h}, ${f})`,a.strokeStyle=u<0?"#000002":"#000001"}():7==i?(o[1]>=1&&(o[1]=1),void(a.globalAlpha=1-o[1]/(60*s)*r)):17==i?function(){let{br:e,bg:t,bb:i,fr:n,fb:o,fg:c}=l,h=Math.floor((t-c)/(60*s)*r+c),d=Math.floor((e-n)/(60*s)*r+n),f=Math.floor((i-o)/(60*s)*r+o);a.fillStyle=`rgb(${d}, ${h}, ${f})`,a.strokeStyle=u<0?"#000002":"#000001"}():10==i?function(){let{br:e,bg:t,bb:i,fr:n,fb:o,fg:c}=l,h=Math.floor((t-c)/(60*s)*r+c),d=Math.floor((e-n)/(60*s)*r+n),f=Math.floor((i-o)/(60*s)*r+o);a.fillStyle=`rgb(${d}, ${h}, ${f})`,a.strokeStyle=u<0?"#000002":"#000001"}():2==i?function(){let{r:e,g:t,b:r}=l;a.fillStyle=`rgb(${e}, ${t}, ${r})`,a.strokeStyle="#00000b"}():1==i?function(){let{r:e,g:t,b:i}=l;a.globalAlpha=1/(60*s)*r,a.fillStyle=`rgb(${e}, ${t}, ${i})`,a.fillRect(f.x,f.y,f.width,f.height)}():18==i?void(a.strokeStyle=r<60*s*.6&&r>60*s*.5?"#000004":"#000000"):S():2==n?17==i?void(a.globalAlpha=0):19==i?A():2==i?function(){0==r&&(I=C(),e.other.animDis=I);var t=I[0],i=I[1];switch(e.other.addTimes&&e.other.addTimes!=r&&(t=-t*e.other.addTimes,i=-i*e.other.addTimes),r!=60*s||e.other.addTimes||(t=-t*r,i=-i*r),o){case 0:a.translate(0,i/(60*s)*r);break;case 1:a.translate(-t/(60*s)*r,0);break;case 2:a.translate(t/(60*s)*r,0);break;case 3:a.translate(0,-i/(60*s)*r);break;case 4:a.translate(-t/(60*s)*r,i/(60*s)*r);break;case 5:a.translate(t/(60*s)*r,i/(60*s)*r);break;case 6:a.translate(-t/(60*s)*r,-i/(60*s)*r);break;case 7:a.translate(t/(60*s)*r,-i/(60*s)*r)}}():31==i?(a.globalAlpha=1-1/(60*s)*r,e.other.addTimes&&e.other.addTimes!=r&&a.translate(0,-250/(60*s)*e.other.addTimes),r!=60*s||e.other.addTimes||a.translate(0,-250),void(!e.other.addTimes&&a.translate(0,250/(60*s)*r))):8==i?function(){if(a.beginPath(),h)var e=h[0],t=h[1],i=h[2],n=h[3];else e=m,t=g,i=y,n=b;switch(r=60*s-r,o){case 1:a.rect(e-.5,t-.5,i+1,n/2/(60*s)*r+.001),a.rect(e-.5,t+n-n/2/(60*s)*r-.5,i+1,n/2/(60*s)*r+.001);break;case 0:a.rect(e-.5,t+n/2-n/2/(60*s)*r,i+1,n/(60*s)*r+.001);break;case 3:a.rect(e+.5,t-.5,i/2/(60*s)*r+.001,n+1),a.rect(e+i-i/2/(60*s)*r-.5,t-.5,i/2/(60*s)*r+.001,n+1);break;case 2:a.rect(e+i/2-i/2/(60*s)*r,t-.5,i/(60*s)*r+.001,n+1)}a.clip()}():1==i?function(){if(a.beginPath(),h)var e=h[0],t=h[1],i=h[2],n=h[3];else e=m,t=g,i=y,n=b;switch(r=60*s-r,o){case 3:a.rect(e-.5,t+n-n/(60*s)*r+1,i+1,n/(60*s)*r+1);break;case 2:a.rect(e-.5,t-.5,i/(60*s)*r-1,n+1);break;case 1:a.rect(e+i-i/(60*s)*r-.5,t-.5,i/(60*s)*r,n+1);break;case 0:a.rect(e-.5,t-1.5,i+1,n/(60*s)*r)}a.clip()}():18==i?function(){if(a.beginPath(),h)var e=h[0],t=h[1],i=h[2],n=h[3];else e=m,t=g,i=y,n=b;var l=e+i/2,c=t+n/2,d=i/Math.sqrt(2),u=n/Math.sqrt(2);switch(a.rect(e-.5,t-.5,i+1,n+1),a.clip(),o){case 0:a.beginPath(),a.ellipse(l,c,d-d/(60*s)*r,u-u/(60*s)*r,0,0,2*Math.PI),a.clip();break;case 1:a.beginPath(),a.fillStyle="white",a.strokeStyle="white",a.ellipse(l,c,d/(60*s)*r,u/(60*s)*r,0,0,2*Math.PI),a.fill(),a.stroke(),a.closePath()}}():7==i?function(){if(a.beginPath(),h)var e=h[0],t=h[1],i=h[2],n=h[3];else e=m,t=g,i=y,n=b;var l=e+i/2,c=t+n/2,d=i>n?i:n;switch(r=60*s-r,o){case 0:a.moveTo(l,c),a.arc(l,c,d,1.5*Math.PI,1.5*Math.PI-2*Math.PI/(60*s)*r,!0);break;case 1:a.moveTo(l,c),a.arc(l,c,d,.5*Math.PI,.5*Math.PI-Math.PI/(60*s)*r,!0),a.moveTo(l,c),a.arc(l,c,d,1.5*Math.PI,1.5*Math.PI-Math.PI/(60*s)*r,!0);break;case 2:a.moveTo(l,c),a.arc(l,c,d,Math.PI/6,Math.PI/6-2/3*Math.PI/(60*s)*r,!0),a.moveTo(l,c),a.arc(l,c,d,5*Math.PI/6,5*Math.PI/6-2/3*Math.PI/(60*s)*r,!0),a.moveTo(l,c),a.arc(l,c,d,1.5*Math.PI,1.5*Math.PI-2/3*Math.PI/(60*s)*r,!0);break;case 3:a.moveTo(l,c),a.arc(l,c,d,0*Math.PI,0*Math.PI-.5*Math.PI/(60*s)*r,!0),a.moveTo(l,c),a.arc(l,c,d,.5*Math.PI,.5*Math.PI-.5*Math.PI/(60*s)*r,!0),a.moveTo(l,c),a.arc(l,c,d,1*Math.PI,1*Math.PI-.5*Math.PI/(60*s)*r,!0),a.moveTo(l,c),a.arc(l,c,d,1.5*Math.PI,1.5*Math.PI-.5*Math.PI/(60*s)*r,!0);break;case 4:a.moveTo(l,c),a.arc(l,c,d,.25*Math.PI,.25*Math.PI-.25*Math.PI/(60*s)*r,!0),a.moveTo(l,c),a.arc(l,c,d,.5*Math.PI,.5*Math.PI-.25*Math.PI/(60*s)*r,!0),a.moveTo(l,c),a.arc(l,c,d,.75*Math.PI,.75*Math.PI-.25*Math.PI/(60*s)*r,!0),a.moveTo(l,c),a.arc(l,c,d,1*Math.PI,1*Math.PI-.25*Math.PI/(60*s)*r,!0),a.moveTo(l,c),a.arc(l,c,d,1.25*Math.PI,1.25*Math.PI-.25*Math.PI/(60*s)*r,!0),a.moveTo(l,c),a.arc(l,c,d,1.5*Math.PI,1.5*Math.PI-.25*Math.PI/(60*s)*r,!0),a.moveTo(l,c),a.arc(l,c,d,1.75*Math.PI,1.75*Math.PI-.25*Math.PI/(60*s)*r,!0),a.moveTo(l,c),a.arc(l,c,d,2*Math.PI,2*Math.PI-.25*Math.PI/(60*s)*r,!0)}a.clip()}():14==i?function(){var e=30,t=[0,8,4,5,2,9,3,6,7,1],i=[5,4,6,3,7,2,8,1,9,0],n=[9,1,2,8,0,7,3,5,4,6];if(a.beginPath(),h)var l=h[0],c=h[1],d=h[2],u=h[3];else l=m,c=g,d=y,u=b;switch(o){case 1:var f=10-Math.floor(r/(6*s));for(let r=0;r<e;r++)if(r%3==0)for(let i=0;i<f;i++)a.rect(l+r*d/e+t[i]*d/300,c,d/300,u);else if(r%3==1)for(let t=0;t<f;t++)a.rect(l+r*d/e+i[t]*d/300,c,d/300,u);else for(let t=0;t<f;t++)a.rect(l+r*d/e+n[t]*d/300,c,d/300,u);break;case 0:var p=10-Math.floor(r/(6*s));for(let r=0;r<e;r++)if(r%3==0)for(let i=0;i<p;i++)a.rect(l,c+r*u/e+t[i]*u/300,d,u/300);else if(r%3==1)for(let t=0;t<p;t++)a.rect(l,c+r*u/e+i[t]*u/300,d,u/300);else for(let t=0;t<p;t++)a.rect(l,c+r*u/e+n[t]*u/300,d,u/300)}a.clip()}():21==i?function(){if(h)var e=h[0],t=h[1],i=h[2],n=h[3];else e=m,t=g,i=y,n=b;var o=e+i/2,l=t+n/2;a.globalAlpha=1-1/(60*s)*r,a.translate(o*(1-(1-1/(60*s)*r)),l*(1-(1-1/(60*s)*r))),a.scale(1-1/(60*s)*r,1-1/(60*s)*r)}():24==i?function(){a.globalAlpha=1-1/(60*s)*r;var e=R(t).x,i=R(t).y;a.translate(e,i),a.rotate(Math.PI/4/(60*s)*r),a.translate(-e,-i),a.translate(e*(1-(1-.75/(60*s)*r)),i*(1-(1-.75/(60*s)*r))),a.scale(1-.75/(60*s)*r,1-.75/(60*s)*r)}():20==i?function(){var e;if(a.globalAlpha=1-1/(60*s)*r,h){var i=h[0];h[1];e=i+h[2]/2,h[3]}else e=R(t).x,R(t).y;r<=30*s?a.transform(1-2/(30*s)*r,0,0,1,e*(1-(1-2/(30*s)*r)),0):a.transform(2/(30*s)*(r-30*s)-1,0,0,1,e*(1-(2/(30*s)*(r-30*s)-1)),0)}():35==i?function(){if(a.beginPath(),h)var e=h[0],t=h[1],i=h[2],n=h[3];else e=m,t=g,i=y,n=b;var l=t+n/2,c=o[1].pathPoints,d=[];for(let e=0;e<c.length;e++)d.push([c[e],c[e+1]]),e++;var u=d.length,f=u/(60*s),p=Math.floor(f*r),x=f*r-p;if(f*r<u&&p<u-1){var P=[d[p][0],d[p][1]],k=[d[p+1][0],d[p+1][1]];a.translate(P[0]+(k[0]-P[0])*x,P[1]+(k[1]-P[1])*x),r>1&&p<u-1&&d[p][1]>=d[p+1][1]&&d[p][1]>=d[p-1][1]&&(a.translate(0,.2*l),a.scale(1,.8))}else a.globalAlpha=0;a.globalAlpha&&a.rect(e-.5,t-.5+n/(u/f)*r+1,i+1,n-n/(u/f)*r+1),a.clip()}():27==i?(a.globalAlpha=1-1/(60*s)*r,e.other.addTimes&&e.other.addTimes!=r&&a.translate(0,-100/(60*s)*e.other.addTimes),r!=60*s||e.other.addTimes||a.translate(0,-100),void(!e.other.addTimes&&a.translate(0,-50/(60*s)*r))):0==i?function(){switch(a.beginPath(),o){case 0:for(let e=0;e<=5;e++)a.rect(m,g+b/6*e,y,b/6/(60*s)*(60*s-r));break;case 1:for(let e=0;e<=5;e++)a.rect(m+y/6*e,g,y/6/(60*s)*(60*s-r),b)}a.clip()}():4==i?function(){switch(a.beginPath(),o){case 0:a.translate(0,(a.canvas.height/2-g+b)/(60*s)*r),a.rect(m,g,y,b);break;case 1:a.translate(-(m+y)/(60*s)*r,0),a.rect(m,g,y,b);break;case 2:a.translate((a.canvas.width/2-m+y)/(60*s)*r,0),a.rect(m,g,y,b);break;case 3:a.translate(0,-(g+b)/(60*s)*r),a.rect(m,g,y,b)}a.clip()}():5==i?function(){let e=Math.floor(20-r/(3*s));switch(a.beginPath(),o){case 2:if(e<=10)for(let t=0;t<=20;t++)t<=2*e&&a.rect(m+t*y/20,g,y/20,(2*e-t)*b/20);else for(let t=0;t<=20;t++)t<2*(e-10)?a.rect(m+t*y/20,g,y/20,b):a.rect(m+t*y/20,g,y/20,b-b*(t+20-2*e)/20);break;case 0:if(e<=10)for(let t=0;t<=20;t++)t<=2*e&&a.rect(m+y-t*y/20,g,y/20,(2*e-t)*b/20);else for(let t=0;t<=20;t++)t<2*(e-10)?a.rect(m+y-t*y/20,g,y/20,b):a.rect(m+y-t*y/20,g,y/20,b-b*(t+20-2*e)/20);break;case 3:if(e<=10)for(let t=0;t<=20;t++)t<=2*e&&a.rect(m+t*y/20,g+b-(2*e-t)*b/20,y/20,(2*e-t)*b/20);else for(let t=0;t<=20;t++)t<2*(e-10)?a.rect(m+t*y/20,g,y/20,b):a.rect(m+t*y/20,g+b*(t+20-2*e)/20,y/20,b-b*(t+20-2*e)/20);break;case 1:if(e<=10)for(let t=0;t<=20;t++)t<=2*e&&a.rect(m+y-t*y/20,g+b-(2*e-t)*b/20,y/20,(2*e-t)*b/20);else for(let t=0;t<=20;t++)t<2*(e-10)?a.rect(m+y-t*y/20,g,y/20,b):a.rect(m+y-t*y/20,g+b*(t+20-2*e)/20,y/20,b-b*(t+20-2*e)/20)}a.clip()}():9==i?function(){switch(r=60*s-r,a.beginPath(),o){case 0:for(let e=0;e<=11;e++)for(let t=0;t<=5;t++)(e+t)%2==0?30*s-r>0?a.rect(m+y/12*e,g+b/6*t,y/12/(30*s)*r,b/6):a.rect(m+y/12*e,g+b/6*t,y/12,b/6):30*s-r<0&&a.rect(m+y/12*e,g+b/6*t,y/12/(30*s)*(r-30*s),b/6);break;case 1:for(let e=0;e<=5;e++)for(let t=0;t<=11;t++)(e+t)%2==0?30*s-r>0?a.rect(m+y/6*e,g+b/12*t,y/6,b/12/(30*s)*r):a.rect(m+y/6*e,g+b/12*t,y/6,b/12):30*s-r<0&&a.rect(m+y/6*e,g+b/12*t,y/6,b/12/(30*s)*(r-30*s))}a.clip()}():12==i?function(){const e=m+y/2,t=g+b/2;a.beginPath(),a.moveTo(e,t),a.arc(e,t,(b+y)/2,.5*-Math.PI+Math.PI/(60*s)*r,1.5*Math.PI-Math.PI/(60*s)*r),a.closePath(),a.clip()}():16==i?function(){let e=Math.floor(20-r/(3*s)),t=Math.floor(y/60)+1,i=Math.floor(b/20)+1;a.beginPath();for(let r=0;r<t;r++)for(let n=0;n<i;n++)for(let s=1;s<=e;s++)switch(s){case 1:a.rect(m+y/t*r+y/t/5*4,g+b/i*n+b/i/4*3,y/t/5,b/i/4);break;case 2:a.rect(m+y/t*r+y/t/5*3,g+b/i*n+b/i/4*2,y/t/5,b/i/4);break;case 3:a.rect(m+y/t*r+y/t/5*3,g+b/i*n+b/i/4*1,y/t/5,b/i/4);break;case 4:a.rect(m+y/t*r+y/t/5*2,g+b/i*n+b/i/4*0,y/t/5,b/i/4);break;case 5:a.rect(m+y/t*r+y/t/5*0,g+b/i*n+b/i/4*1,y/t/5,b/i/4);break;case 6:a.rect(m+y/t*r+y/t/5*1,g+b/i*n+b/i/4*3,y/t/5,b/i/4);break;case 7:a.rect(m+y/t*r+y/t/5*4,g+b/i*n+b/i/4*1,y/t/5,b/i/4);break;case 8:a.rect(m+y/t*r+y/t/5*0,g+b/i*n+b/i/4*0,y/t/5,b/i/4);break;case 9:a.rect(m+y/t*r+y/t/5*0,g+b/i*n+b/i/4*2,y/t/5,b/i/4);break;case 10:a.rect(m+y/t*r+y/t/5*3,g+b/i*n+b/i/4*0,y/t/5,b/i/4);break;case 11:a.rect(m+y/t*r+y/t/5*1,g+b/i*n+b/i/4*1,y/t/5,b/i/4);break;case 12:a.rect(m+y/t*r+y/t/5*2,g+b/i*n+b/i/4*3,y/t/5,b/i/4);break;case 13:a.rect(m+y/t*r+y/t/5*1,g+b/i*n+b/i/4*0,y/t/5,b/i/4);break;case 14:a.rect(m+y/t*r+y/t/5*0,g+b/i*n+b/i/4*3,y/t/5,b/i/4);break;case 15:a.rect(m+y/t*r+y/t/5*2,g+b/i*n+b/i/4*2,y/t/5,b/i/4);break;case 16:a.rect(m+y/t*r+y/t/5*4,g+b/i*n+b/i/4*0,y/t/5,b/i/4);break;case 17:a.rect(m+y/t*r+y/t/5*4,g+b/i*n+b/i/4*2,y/t/5,b/i/4);break;case 18:a.rect(m+y/t*r+y/t/5*1,g+b/i*n+b/i/4*2,y/t/5,b/i/4);break;case 19:a.rect(m+y/t*r+y/t/5*2,g+b/i*n+b/i/4*1,y/t/5,b/i/4);break;case 20:a.rect(m+y/t*r+y/t/5*3,g+b/i*n+b/i/4*3,y/t/5,b/i/4)}a.clip()}():6==i?function(){let e=60*s-r;switch(a.beginPath(),o){case 0:a.moveTo(m+y/2-y/(60*s)*e,g+b/2),a.lineTo(m+y/2,g+b/2-b/(60*s)*e),a.lineTo(m+y-y/2+y/(60*s)*e,g+b/2),a.lineTo(m+y/2,g+b-b/2+b/(60*s)*e),a.lineTo(m+y/2-y/(60*s)*e,g+b/2),a.closePath();break;case 1:e/(60*s)<.5?(a.moveTo(m,g),a.lineTo(m+y/(60*s)*e,g),a.lineTo(m,g+b/(60*s)*e),a.lineTo(m,g),a.closePath(),a.moveTo(m+y,g),a.lineTo(m+y-y/(60*s)*e,g),a.lineTo(m+y,g+b/(60*s)*e),a.lineTo(m+y,g),a.closePath(),a.moveTo(m,g+b),a.lineTo(m,g+b-b/(60*s)*e),a.lineTo(m+y/(60*s)*e,g+b),a.lineTo(m,g+b),a.closePath(),a.moveTo(m+y,g+b),a.lineTo(m+y,g+b-b/(60*s)*e),a.lineTo(m+y-y/(60*s)*e,g+b),a.lineTo(m+y,g+b),a.closePath()):(a.moveTo(m,g),a.lineTo(m,g+b),a.lineTo(m+y,g+b),a.lineTo(m+y,g),a.lineTo(m,g),a.moveTo(m+y/2,g-b/2+b/(60*s)*e),a.lineTo(m+1.5*y-y/(60*s)*e,g+b/2),a.lineTo(m+y/2,g+1.5*b-b/(60*s)*e),a.lineTo(m-y/2+y/(60*s)*e,g+b/2),a.lineTo(m+y/2,g-b/2+b/(60*s)*e),a.closePath())}a.clip()}():10==i?function(){let e=60*s-r;switch(a.beginPath(),o){case 0:a.translate(0,b-b/(60*s)*e),a.rect(m,g,y,b/(60*s)*e);break;case 1:a.translate(y/(60*s)*e-y,0),a.rect(m+y-y/(60*s)*e,g,y/(60*s)*e,b);break;case 2:a.translate(y-y/(60*s)*e,0),a.rect(m,g,y/(60*s)*e,b);break;case 3:a.translate(0,b/(60*s)*e-b),a.rect(m,g+b-b/(60*s)*e,y,b/(60*s)*e)}a.clip()}():3==i?function(){let e=60*s-r;if(a.beginPath(),h)var t=h[0],i=h[1],n=h[2],l=h[3];switch(o){case 1:h?(a.rect(t,i,n,l/2/(60*s)*e),a.rect(t,i+l-l/2/(60*s)*e,n,l/2/(60*s)*e),a.rect(t,i,n/2/(60*s)*e,l),a.rect(t+n-n/2/(60*s)*e,i,n/2/(60*s)*e,l)):(a.rect(m-.5,g-.5,y+1,b/2/(60*s)*e+1),a.rect(m-.5,g+b-b/2/(60*s)*e-.5,y+1,b/2/(60*s)*e+1),a.rect(m-.5,g-.5,y/2/(60*s)*e+1,b+1),a.rect(m+y-y/2/(60*s)*e-.5,g-.5,y/2/(60*s)*e+1,b+1));break;case 0:h?a.rect(t+n/2*(1-1/(60*s)*e),i+l/2*(1-1/(60*s)*e),n/(60*s)*e,l/(60*s)*e):a.rect(m+y/2*(1-1/(60*s)*e),g+b/2*(1-1/(60*s)*e),y/(60*s)*e,b/(60*s)*e)}a.clip()}():11==i?void(r!==30*s&&r!==60*s||(a.globalAlpha=0)):A():3==n?function(){a.beginPath();let e=o[1].pathPoints,i=[];for(let t=0;t<e.length;t++)i.push([e[t],e[t+1]]),t++;h&&t&&a.translate(R(t).x-(h[0]+h[2]/2),R(t).y-(h[1]+h[3]/2));let n=i.length,l=n/(60*s);if(l*r<n&&Math.floor(l*r)<n-1){let e=Math.floor(l*r),t=l*r-e,n=[i[e][0],i[e][1]],s=[i[e+1][0],i[e+1][1]];a.translate(n[0]+(s[0]-n[0])*t,n[1]+(s[1]-n[1])*t)}else a.translate(i[n-1][0],i[n-1][1])}():void 0;if(2!=i)if(19!=i){if(3==i)return function(){0==r&&(I=C(),e.other.animDis=I);var t=I[0],i=I[1];switch(o){case 0:r?a.translate(0,i-i/(60*s)*r):a.translate(0,i);break;case 1:r?a.translate(t/(60*s)*r-t,0):a.translate(-t,0);break;case 2:r?a.translate(t-t/(60*s)*r,0):a.translate(t,0);break;case 3:r?a.translate(0,i/(60*s)*r-i):a.translate(0,-i);break;case 4:r?a.translate(t/(60*s)*r-t,i-i/(60*s)*r):a.translate(-t,i);break;case 5:r?a.translate(t-t/(60*s)*r,i-i/(60*s)*r):a.translate(t,i);break;case 6:r?a.translate(t/(60*s)*r-t,i/(60*s)*r-i):a.translate(-t,-i);break;case 7:r?a.translate(t-t/(60*s)*r,i/(60*s)*r-i):a.translate(t,-i)}}();if(26==i)return function(){let t=100;e.other.addTimes&&e.other.addTimes!=r&&a.translate(0,(t-t/(60*s)*r)*(60*s-e.other.addTimes)),a.globalAlpha=1/(60*s)*r,r?e.other.addTimes||a.translate(0,t-t/(60*s)*r):a.translate(0,t)}();if(9==i)return function(){if(a.beginPath(),h)var e=h[0],t=h[1],i=h[2],n=h[3];switch(o){case 0:h?(a.rect(e,t,i,n/2/(60*s)*r),a.rect(e,t+n-n/2/(60*s)*r,i,n/2/(60*s)*r)):(a.rect(m-.5,g-.5,y+1,b/2/(60*s)*r+1),a.rect(m-.5,g+b-b/2/(60*s)*r-.5,y+1,b/2/(60*s)*r+1));break;case 1:h?a.rect(e,t+n/2-n/2/(60*s)*r,i,n/(60*s)*r):a.rect(m-.5,g+b/2-b/2/(60*s)*r-.5,y+1,b/(60*s)*r+1);break;case 2:h?(a.rect(e,t,i/2/(60*s)*r,n),a.rect(e+i-i/2/(60*s)*r,t,i/2/(60*s)*r,n)):(a.rect(m-.5,g-.5,y/2/(60*s)*r+1,b+1),a.rect(m+y-y/2/(60*s)*r-.5,g-.5,y/2/(60*s)*r+1,b+1));break;case 3:h?a.rect(e+i/2-i/2/(60*s)*r,t,i/(60*s)*r,n):a.rect(m+y/2-y/2/(60*s)*r-.5,g-.5,y/(60*s)*r+1,b+1)}a.clip()}();if(1==i)return function(){if(a.beginPath(),h)var e=h[0],t=h[1],i=h[2],n=h[3];switch(o){case 0:h?a.rect(e,t+n-n/(60*s)*r,i,n/(60*s)*r):a.rect(m-.5,g+b-b/(60*s)*r-.5,y+1,b/(60*s)*r+1);break;case 1:h?a.rect(e,t,i/(60*s)*r,n):a.rect(m-.5,g-.5,y/(60*s)*r,b+1);break;case 2:h?a.rect(e+i-i/(60*s)*r,t,i/(60*s)*r,n):a.rect(m+y-y/(60*s)*r-.5,g-.5,y/(60*s)*r+1,b+1);break;case 3:h?a.rect(e,t,i,n/(60*s)*r):a.rect(m-.5,g-.5,y+1,b/(60*s)*r+1)}a.clip()}();if(18==i)return function(){if(a.beginPath(),h)var e=h[0],t=h[1],i=h[2],n=h[3],l=e+i/2,c=t+n/2,d=i/2,u=n/2;switch(o){case 0:if(h){a.rect(e-.5,t-.5,i+.5,n+.5),a.clip(),a.beginPath(),a.fillStyle="white",a.strokeStyle="white";let o=(d*Math.sqrt(2)-d*Math.sqrt(2)/(60*s)*r).toFixed(2),h=(u*Math.sqrt(2)-u*Math.sqrt(2)/(60*s)*r).toFixed(2);a.ellipse(l,c,o,h,0,0,2*Math.PI),a.fill(),a.stroke(),a.closePath()}else{a.rect(m-3.5,g-3.5,y+10,b+10),a.clip(),a.beginPath(),a.fillStyle="rgb(255, 255, 255)",a.strokeStyle="white";let e=(y/1.8-y/1.8/(60*s)*r>0?y/1.8-y/1.8/(60*s)*r:0).toFixed(2),t=(b/1.8-b/1.8/(60*s)*r>0?b/1.8-b/1.8/(60*s)*r:0).toFixed(2);a.ellipse(m+y/2,g+b/2,e,t,0,0,2*Math.PI),a.fill(),a.stroke(),a.closePath()}break;case 1:h?a.ellipse(l,c,(d*Math.sqrt(2)/(60*s)*r).toFixed(2),(u*Math.sqrt(2)/(60*s)*r).toFixed(2),0,0,2*Math.PI):a.ellipse(m+y/2,g+b/2,(y/Math.sqrt(2)/(60*s)*r).toFixed(2),(b/Math.sqrt(2)/(60*s)*r).toFixed(2),0,0,2*Math.PI),a.clip()}}();if(8==i)return function(){if(a.beginPath(),h)var e=h[0],t=h[1],i=h[2],n=h[3],l=e+i/2,c=t+n/2,d=n>=i?n:i;else l=m+y/2,c=g+b/2,d=y>=b?y:b;switch(o){case 0:a.moveTo(l,c),a.arc(l,c,d,.5*-Math.PI,.5*-Math.PI+2*Math.PI/(60*s)*r,!1);break;case 1:a.moveTo(l,c),a.arc(l,c,d,.5*-Math.PI,.5*-Math.PI+Math.PI/(60*s)*r,!1),a.moveTo(l,c),a.arc(l,c,d,.5*Math.PI,.5*Math.PI+Math.PI/(60*s)*r,!1);break;case 2:a.moveTo(l,c),a.arc(l,c,d,.5*-Math.PI,.5*-Math.PI+2/3*Math.PI/(60*s)*r,!1),a.moveTo(l,c),a.arc(l,c,d,Math.PI/6,Math.PI/6+2/3*Math.PI/(60*s)*r,!1),a.moveTo(l,c),a.arc(l,c,d,5*Math.PI/6,5*Math.PI/6+2/3*Math.PI/(60*s)*r,!1);break;case 3:a.moveTo(l,c),a.arc(l,c,d,.5*-Math.PI,.5*-Math.PI+.5*Math.PI/(60*s)*r,!1),a.moveTo(l,c),a.arc(l,c,d,0*Math.PI,0*Math.PI+.5*Math.PI/(60*s)*r,!1),a.moveTo(l,c),a.arc(l,c,d,.5*Math.PI,.5*Math.PI+.5*Math.PI/(60*s)*r,!1),a.moveTo(l,c),a.arc(l,c,d,1*Math.PI,1*Math.PI+.5*Math.PI/(60*s)*r,!1);break;case 4:a.moveTo(l,c),a.arc(l,c,d,0*Math.PI,0*Math.PI+.25*Math.PI/(60*s)*r,!1),a.moveTo(l,c),a.arc(l,c,d,.25*Math.PI,.25*Math.PI+.25*Math.PI/(60*s)*r,!1),a.moveTo(l,c),a.arc(l,c,d,.5*Math.PI,.5*Math.PI+.25*Math.PI/(60*s)*r,!1),a.moveTo(l,c),a.arc(l,c,d,.75*Math.PI,.75*Math.PI+.25*Math.PI/(60*s)*r,!1),a.moveTo(l,c),a.arc(l,c,d,1*Math.PI,1*Math.PI+.25*Math.PI/(60*s)*r,!1),a.moveTo(l,c),a.arc(l,c,d,1.25*Math.PI,1.25*Math.PI+.25*Math.PI/(60*s)*r,!1),a.moveTo(l,c),a.arc(l,c,d,1.5*Math.PI,1.5*Math.PI+.25*Math.PI/(60*s)*r,!1),a.moveTo(l,c),a.arc(l,c,d,1.75*Math.PI,1.75*Math.PI+.25*Math.PI/(60*s)*r,!1)}a.clip()}();if(15==i)return function(){var e=30,t=[0,8,4,5,2,9,3,6,7,1],i=[5,4,6,3,7,2,8,1,9,0],n=[9,1,2,8,0,7,3,5,4,6];if(a.beginPath(),h)var l=h[0],c=h[1],d=h[2],u=h[3];else l=m,c=g,d=y,u=b;switch(o){case 1:var f=Math.floor(r/(6*s));for(let r=0;r<e;r++)if(r%3==0)for(let i=0;i<f;i++)a.rect(l+r*d/e+t[i]*d/300,c,d/300,u);else if(r%3==1)for(let t=0;t<f;t++)a.rect(l+r*d/e+i[t]*d/300,c,d/300,u);else for(let t=0;t<f;t++)a.rect(l+r*d/e+n[t]*d/300,c,d/300,u);break;case 0:var p=Math.floor(r/(6*s));for(let r=0;r<e;r++)if(r%3==0)for(let i=0;i<p;i++)a.rect(l,c+r*u/e+t[i]*u/300,d,u/300);else if(r%3==1)for(let t=0;t<p;t++)a.rect(l,c+r*u/e+i[t]*u/300,d,u/300);else for(let t=0;t<p;t++)a.rect(l,c+r*u/e+n[t]*u/300,d,u/300)}a.clip()}();if(23==i)return function(){if(a.globalAlpha=1/(60*s)*r,h)var e=h[0],t=h[1],i=h[2],n=h[3];else e=m,t=g,i=y,n=b;var o=e+i/2,l=t+n/2;a.translate(o,l),a.rotate(Math.PI/4-Math.PI/4/(60*s)*r),a.translate(-o,-l),a.translate(o*(1-1/(60*s)*r),l*(1-1/(60*s)*r)),a.scale(1/(60*s)*r,1/(60*s)*r)}();if(21==i)return function(){if(a.globalAlpha=1/(60*s)*r,h)var e=h[0],t=h[1],i=h[2],n=h[3];else e=m,t=g,i=y,n=b;var o=e+i/2,l=t+n/2;a.translate(o*(1-(.5+.5/(60*s)*r)),l*(1-(.5+.5/(60*s)*r))),a.scale(.5+.5/(60*s)*r,.5+.5/(60*s)*r)}();if(20==i)return function(){var e;if(a.globalAlpha=1/(60*s)*r,h){var i=h[0];h[1];e=i+h[2]/2,h[3]}else e=R(t).x,R(t).y;0<r&&r<=20*s?r=20*s-r:20*s<r&&r<=40*s?r-=20*s:40*s<r&&r<=60*s&&(r=60*s-r),a.transform(1-2/(20*s)*r,0,0,1,e*(1-(1-2/(20*s)*r)),0)}();if(35==i)return function(){if(h){h[0];var e=h[1],t=(h[2],h[3])}else e=g,t=b;var i=e+t/2,n=o[1].pathPoints,l=[];for(let e=0;e<n.length;e++)l.push([n[e],n[e+1]]),e++;var c=l.length,d=c/(60*s),u=Math.floor(d*r),f=d*r-u;if(d*r<c&&u<c-1){var p=[l[u][0],l[u][1]],m=[l[u+1][0],l[u+1][1]];a.translate(p[0]/3+(m[0]-p[0])*f,p[1]/3+(m[1]-p[1])*f),r>1&&u<c-1&&l[u][1]>=l[u+1][1]&&l[u][1]>=l[u-1][1]&&(a.translate(0,.2*i),a.scale(1,.8))}else a.translate(0,0)}();if(30==i)return e.other.addTimes&&e.other.addTimes!=r&&a.translate(0,(250/(60*s)*r-250)*(60*s-e.other.addTimes)),a.globalAlpha=1/(60*s)*r,void(r?e.other.addTimes||a.translate(0,250/(60*s)*r-250):a.translate(0,-250));if(38!=i)return 25==i?(a.translate(250/(60*s)*r-250,0),a.beginPath(),a.rect(m+y-y/(60*s)*r,g,60*s*r,b),void a.clip()):4==i?function(){if(a.beginPath(),h)var e=h[0],t=h[1],i=h[2],n=h[3];switch(o){case 0:h?(a.rect(e,t,i,n/2/(60*s)*r),a.rect(e,t+n-n/2/(60*s)*r,i,n/2/(60*s)*r),a.rect(e,t,i/2/(60*s)*r,n),a.rect(e+i-i/2/(60*s)*r,t,i/2/(60*s)*r,n)):(a.rect(m-.5,g-.5,y+1,b/2/(60*s)*r+1),a.rect(m-.5,g+b-b/2/(60*s)*r-.5,y+1,b/2/(60*s)*r+1),a.rect(m-.5,g-.5,y/2/(60*s)*r+1,b+1),a.rect(m+y-y/2/(60*s)*r-.5,g-.5,y/2/(60*s)*r+1,b+1));break;case 1:h?a.rect(e+i/2*(1-1/(60*s)*r),t+n/2*(1-1/(60*s)*r),i/(60*s)*r,n/(60*s)*r):a.rect(m+y/2*(1-1/(60*s)*r),g+b/2*(1-1/(60*s)*r),y/(60*s)*r,b/(60*s)*r)}a.clip()}():6==i?function(){let e=Math.floor(r/(3*s));switch(a.beginPath(),o){case 2:if(e<=10)for(let t=0;t<=20;t++)t<=2*e&&a.rect(m+t*y/20,g,y/20,(2*e-t)*b/20);else for(let t=0;t<=20;t++)t<2*(e-10)?a.rect(m+t*y/20,g,y/20,b):a.rect(m+t*y/20,g,y/20,b-b*(t+20-2*e)/20);break;case 0:if(e<=10)for(let t=0;t<=20;t++)t<=2*e&&a.rect(m+y-t*y/20,g,y/20,(2*e-t)*b/20);else for(let t=0;t<=20;t++)t<2*(e-10)?a.rect(m+y-t*y/20,g,y/20,b):a.rect(m+y-t*y/20,g,y/20,b-b*(t+20-2*e)/20);break;case 3:if(e<=10)for(let t=0;t<=20;t++)t<=2*e&&a.rect(m+t*y/20,g+b-(2*e-t)*b/20,y/20,(2*e-t)*b/20);else for(let t=0;t<=20;t++)t<2*(e-10)?a.rect(m+t*y/20,g,y/20,b):a.rect(m+t*y/20,g+b*(t+20-2*e)/20,y/20,b-b*(t+20-2*e)/20);break;case 1:if(e<=10)for(let t=0;t<=20;t++)t<=2*e&&a.rect(m+y-t*y/20,g+b-(2*e-t)*b/20,y/20,(2*e-t)*b/20);else for(let t=0;t<=20;t++)t<2*(e-10)?a.rect(m+y-t*y/20,g,y/20,b):a.rect(m+y-t*y/20,g+b*(t+20-2*e)/20,y/20,b-b*(t+20-2*e)/20)}a.clip()}():29==i?function(){if(h)var e=h[0],t=h[1],i=h[2],n=h[3];else e=m,t=g,i=y,n=b;var l=e+i/2,c=t+n/2,d=a.canvas.width/2.5-e-i/2,u=a.canvas.height/3-t-n/2;switch(o){case 0:a.translate(l*(1-(.5+.5/(60*s)*r)),c*(1-(.5+.5/(60*s)*r))),a.scale(.5+.5/(60*s)*r,.5+.5/(60*s)*r);break;case 1:a.translate(d*(1-(.3+.7/(60*s)*r)),u*(1-(.3+.7/(60*s)*r))),a.scale(.3+.7/(60*s)*r,.3+.7/(60*s)*r);break;case 2:a.translate(l*(1-(.8+.2/(60*s)*r)),(t+n)*(1-(.8+.2/(60*s)*r))),a.scale(.8+.2/(60*s)*r,.8+.2/(60*s)*r);break;case 3:a.translate(l*(1/(60*s)*r-1),c*(1/(60*s)*r-1)),a.scale(2-1/(60*s)*r,2-1/(60*s)*r);break;case 4:a.translate(0-l*(1-1/(60*s)*r),u*(1-1/(60*s)*r)),a.scale(2-1/(60*s)*r,2-1/(60*s)*r);break;case 5:a.translate(l*(.2/(60*s)*r-.2),c*(.2/(60*s)*r-.2)),a.scale(1.2-.2/(60*s)*r,1.2-.2/(60*s)*r)}}():14==i?function(){switch(a.beginPath(),o){case 0:a.rect(m,g,y/(120*s)*r,b/(120*s)*r),a.rect(m+y-y/(120*s)*r,g,y/(120*s)*r,b/(120*s)*r),a.rect(m,g+b-b/(120*s)*r,y/(120*s)*r,b/(120*s)*r),a.rect(m+y-y/(120*s)*r,g+b-b/(120*s)*r,y/(120*s)*r,b/(120*s)*r);break;case 1:a.rect(m,g+b/2-b/(120*s)*r,y,b/(60*s)*r),a.rect(m+y/2-y/(120*s)*r,g,y/(60*s)*r,b)}a.clip()}():11==i?function(){switch(a.beginPath(),o){case 0:a.translate(0,b-b/(60*s)*r),a.rect(m,g,y,b/(60*s)*r);break;case 1:a.translate(y/(60*s)*r-y,0),a.rect(m+y-y/(60*s)*r,g,y/(60*s)*r,b);break;case 2:a.translate(y-y/(60*s)*r,0),a.rect(m,g,y/(60*s)*r,b);break;case 3:a.translate(0,b/(60*s)*r-b),a.rect(m,g+b-b/(60*s)*r,y,b/(60*s)*r)}a.clip()}():7==i?function(){switch(a.beginPath(),o){case 1:a.moveTo(m+y/2-y/(60*s)*r,g+b/2),a.lineTo(m+y/2,g+b/2-b/(60*s)*r),a.lineTo(m+y-y/2+y/(60*s)*r,g+b/2),a.lineTo(m+y/2,g+b-b/2+b/(60*s)*r),a.lineTo(m+y/2-y/(60*s)*r,g+b/2),a.closePath();break;case 0:r/(60*s)<.5?(a.moveTo(m,g),a.lineTo(m+y/(60*s)*r,g),a.lineTo(m,g+b/(60*s)*r),a.lineTo(m,g),a.closePath(),a.moveTo(m+y,g),a.lineTo(m+y-y/(60*s)*r,g),a.lineTo(m+y,g+b/(60*s)*r),a.lineTo(m+y,g),a.closePath(),a.moveTo(m,g+b),a.lineTo(m,g+b-b/(60*s)*r),a.lineTo(m+y/(60*s)*r,g+b),a.lineTo(m,g+b),a.closePath(),a.moveTo(m+y,g+b),a.lineTo(m+y,g+b-b/(60*s)*r),a.lineTo(m+y-y/(60*s)*r,g+b),a.lineTo(m+y,g+b),a.closePath()):(a.moveTo(m,g),a.lineTo(m,g+b),a.lineTo(m+y,g+b),a.lineTo(m+y,g),a.lineTo(m,g),a.moveTo(m+y/2,g-b/2+b/(60*s)*r),a.lineTo(m+1.5*y-y/(60*s)*r,g+b/2),a.lineTo(m+y/2,g+1.5*b-b/(60*s)*r),a.lineTo(m-y/2+y/(60*s)*r,g+b/2),a.lineTo(m+y/2,g-b/2+b/(60*s)*r),a.closePath())}a.clip()}():12==i?void(r===60*s&&(a.globalAlpha=0)):0==i?function(){switch(a.beginPath(),o){case 0:for(let e=0;e<=5;e++)a.rect(m,g+b/6*e,y,b/6/(60*s)*r);break;case 1:for(let e=0;e<=5;e++)a.rect(m+y/6*e,g,y/6/(60*s)*r,b)}a.clip()}():5==i?function(){let e;switch(a.beginPath(),o){case 0:e=700-g,a.translate(0,e-e/(60*s)*r),a.rect(m,g,y,b);break;case 1:e=m+y,a.translate(e/(60*s)*r-e,0),a.rect(m,g,y,b);break;case 2:e=900-m,a.translate(e-e/(60*s)*r,0),a.rect(m,g,y,b);break;case 3:e=g+b,a.translate(0,e/(60*s)*r-e),a.rect(m,g,y,b)}a.clip()}():10==i?function(){switch(a.beginPath(),o){case 0:for(let e=0;e<=11;e++)for(let t=0;t<=5;t++)(e+t)%2==0?30*s-r>0?a.rect(m+y/12*e,g+b/6*t,y/12/(30*s)*r,b/6):a.rect(m+y/12*e,g+b/6*t,y/12,b/6):30*s-r<0&&a.rect(m+y/12*e,g+b/6*t,y/12/(30*s)*(r-30*s),b/6);break;case 1:for(let e=0;e<=5;e++)for(let t=0;t<=11;t++)(e+t)%2==0?30*s-r>0?a.rect(m+y/6*e,g+b/12*t,y/6,b/12/(30*s)*r):a.rect(m+y/6*e,g+b/12*t,y/6,b/12):30*s-r<0&&a.rect(m+y/6*e,g+b/12*t,y/6,b/12/(30*s)*(r-30*s))}a.clip()}():13==i?function(){const e=m+y/2,t=g+b/2;a.beginPath(),a.moveTo(e,t),a.arc(e,t,(b+y)/2,.5*-Math.PI-Math.PI/(60*s)*r,.5*-Math.PI+Math.PI/(60*s)*r),a.closePath(),a.clip()}():17==i?function(){let e=Math.floor(r/(3*s)),t=Math.floor(y/60)+1,i=Math.floor(b/20)+1;a.beginPath();for(let r=0;r<t;r++)for(let n=0;n<i;n++)for(let s=1;s<=e;s++)switch(s){case 1:a.rect(m+y/t*r+y/t/5*4,g+b/i*n+b/i/4*3,y/t/5,b/i/4);break;case 2:a.rect(m+y/t*r+y/t/5*3,g+b/i*n+b/i/4*2,y/t/5,b/i/4);break;case 3:a.rect(m+y/t*r+y/t/5*3,g+b/i*n+b/i/4*1,y/t/5,b/i/4);break;case 4:a.rect(m+y/t*r+y/t/5*2,g+b/i*n+b/i/4*0,y/t/5,b/i/4);break;case 5:a.rect(m+y/t*r+y/t/5*0,g+b/i*n+b/i/4*1,y/t/5,b/i/4);break;case 6:a.rect(m+y/t*r+y/t/5*1,g+b/i*n+b/i/4*3,y/t/5,b/i/4);break;case 7:a.rect(m+y/t*r+y/t/5*4,g+b/i*n+b/i/4*1,y/t/5,b/i/4);break;case 8:a.rect(m+y/t*r+y/t/5*0,g+b/i*n+b/i/4*0,y/t/5,b/i/4);break;case 9:a.rect(m+y/t*r+y/t/5*0,g+b/i*n+b/i/4*2,y/t/5,b/i/4);break;case 10:a.rect(m+y/t*r+y/t/5*3,g+b/i*n+b/i/4*0,y/t/5,b/i/4);break;case 11:a.rect(m+y/t*r+y/t/5*1,g+b/i*n+b/i/4*1,y/t/5,b/i/4);break;case 12:a.rect(m+y/t*r+y/t/5*2,g+b/i*n+b/i/4*3,y/t/5,b/i/4);break;case 13:a.rect(m+y/t*r+y/t/5*1,g+b/i*n+b/i/4*0,y/t/5,b/i/4);break;case 14:a.rect(m+y/t*r+y/t/5*0,g+b/i*n+b/i/4*3,y/t/5,b/i/4);break;case 15:a.rect(m+y/t*r+y/t/5*2,g+b/i*n+b/i/4*2,y/t/5,b/i/4);break;case 16:a.rect(m+y/t*r+y/t/5*4,g+b/i*n+b/i/4*0,y/t/5,b/i/4);break;case 17:a.rect(m+y/t*r+y/t/5*4,g+b/i*n+b/i/4*2,y/t/5,b/i/4);break;case 18:a.rect(m+y/t*r+y/t/5*1,g+b/i*n+b/i/4*2,y/t/5,b/i/4);break;case 19:a.rect(m+y/t*r+y/t/5*2,g+b/i*n+b/i/4*1,y/t/5,b/i/4);break;case 20:a.rect(m+y/t*r+y/t/5*3,g+b/i*n+b/i/4*3,y/t/5,b/i/4)}a.clip()}():16==i?function(){let i;if(w.randomNum)i=w.randomNum;else{let e=0,t=w.randomList.length-1;i=w.randomNum=w.randomList[Math.floor(Math.random()*(t-e))+e]}w.animHandler(e,t,a,r,i,n,s,o,l,c,h,d,u),r===60*s*r&&(w.randomNum=void 0)}():22==i?(a.globalAlpha=1/(60*s)*r,a.translate((.5-.5/(60*s)*r)*(m+y/2),0),void a.scale(.5+.5/(60*s)*r,1)):33==i?(a.globalAlpha=1/(60*s)*r,void a.translate((.5/(60*s)*r-.5)*y,0)):void 0}else a.globalAlpha=r/(60*s);function S(){h?(a.globalAlpha=r<=30*s?1-1.8/(60*s)*r:.1+.9/(60*s)*r,a.translate(h[0]*(1-(r<=30*s?1+1/90*r:1+1/90*(60*s-r))),h[1]*(1-(r<=30*s?1+1/90*r:1+1/90*(60*s-r)))),a.scale(r<=30*s?1+1/90*r:1+1/90*(60*s-r),r<=30*s?1+1/90*r:1+1/90*(60*s-r))):(a.globalAlpha=r<=30*s?1-1.8/(60*s)*r:.1+.9/(60*s)*r,a.translate(R(t).x*(1-(r<=30*s?1+1/90*r:1+1/90*(60*s-r))),R(t).y*(1-(r<=30*s?1+1/90*r:1+1/90*(60*s-r)))),a.scale(r<=30*s?1+1/90*r:1+1/90*(60*s-r),r<=30*s?1+1/90*r:1+1/90*(60*s-r)))}function A(){a.globalAlpha=1-1/(60*s)*r}function C(){return 0==o?[0,P>=g?v-g:v-P]:1==o?[m+y>=x+k?m+y:x+k,0]:2==o?[x>=m?T-m:T-x,0]:3==o?[0,P+M>=g+b?P+M:g+b]:4==o?[m+y>=x+k?m+y:x+k,P>=g?v-g:v-P]:5==o?[x>=m?T-m:T-x,P>=g?v-g:v-P]:6==o?[m+y>=x+k?m+y:x+k,P+M>=g+b?P+M:g+b]:7==o?[x>=m?T-m:T-x,P+M>=g+b?P+M:g+b]:[0,P>=g?v-g:v-P]}function R(e){let t=Object.create(null);return e.shapeRect?(t.x=e.shapeRect.x+e.shapeRect.width/2,t.y=e.shapeRect.y+e.shapeRect.height/2):e.textRect&&(t.x=e.textRect.x+e.textRect.width/2,t.y=e.textRect.y+e.textRect.height/2),t}}}class u{reset(e,t,a){this.g=t,this.slide=e,this.count=0,this.animInfo=a,this.shape=a.shape}}class f{constructor(e){this.currAnimationData=[],this.speed=1,this._onPageChange=e=>{this._resetAnimationState({animPosition:e.animPosition})},this._onAnimationListChange=e=>{e&&this.currPage&&e.index===this.currPage.index&&this._jumpTo({animIndex:this.currentAnimIndex||0,animState:this.animState},!0)},this.pgReader=e,this.pgReader.on("pageChange",this._onPageChange),this.pgReader.on("animationListChange",this._onAnimationListChange)}get animationList(){return this.currPage&&Array.isArray(this.currPage.animation)?this.currPage.animation:[]}get currPage(){return this.pgReader.currPage}setCurrentAnimationIndex(e){this.currentAnimIndex=e}isDuringAnimation(){return"inAnim"===this.animState}hasNextAnimation(){return!(0===this.animationList.length||this.currentAnimIndex>=this.animationList.length||this.currentAnimIndex===this.animationList.length-1&&"end"===this.animState)}hasPreAnimation(){return!(0===this.animationList.length||this.currentAnimIndex<0||0===this.currentAnimIndex&&"start"===this.animState)}getCurrentAnimationPosition(){return{animIndex:this.currentAnimIndex?this.currentAnimIndex:0,animState:this.animState?this.animState:"start"}}isFirstPosPrevSecondPos(e,t){return e.animIndex+("start"===e.animState?0:1)<t.animIndex+("start"===t.animState?0:1)}gotoAnimation(e,t=!1){this.clearAnimation(),t||!this.isFirstPosPrevSecondPos(this.getCurrentAnimationPosition(),e)||this.animationDest&&!this.isFirstPosPrevSecondPos(this.animationDest,e)?(this.animationDest=void 0,this._jumpTo(e)):this.animationDest?(this._jumpTo(this.animationDest),this.animationDest=e,this._animateTo()):(this.animationDest=e,this._animateTo())}getNextAnimationPosition(e={stopOnContinuousAnimation:!1}){if(this.hasNextAnimation()){const t=this.getCurrentAnimationPosition();if("inAnim"===this.animState&&e.stopOnContinuousAnimation)return{animIndex:t.animIndex,animState:"end"};if(e.stopOnContinuousAnimation)return{animIndex:t.animIndex+1,animState:t.animState};{const e=this.animationList;let a=t.animIndex+("end"!==t.animState?0:1)+1;for(;a<e.length&&(!e[a]||!e[a][0]||2===e[a][0].startCondition);a++);return{animIndex:a,animState:"start"}}}return null}getPrevAnimationPosition(e={stopOnContinuousAnimation:!1}){if(this.hasPreAnimation()){const t=this.getCurrentAnimationPosition();if(e.stopOnContinuousAnimation)return{animIndex:t.animIndex-1,animState:t.animState};{const e=this.animationList;let a=t.animIndex+("start"===t.animState?0:1)-1;for(;a>0&&(!e[a]||!e[a][0]||2===e[a][0].startCondition);a--);return{animIndex:a,animState:"start"}}}return null}clearAnimation(){clearTimeout(this.delayAnimationTimer),cancelAnimationFrame(this.animationTimer)}_jumpTo(e,t=!0){this.setCurrentAnimationIndex(e.animIndex),this.animState=e.animState;let a=e.animIndex+("start"===e.animState?0:1);for(let e=0;e<this.animationList.length;e++){let t=e<a?2:0;for(let a of this.animationList[e])a.animationState=t}t&&this.pgReader.paint()}_resetAnimationState(e){if(this.currPage){"start"===e.animPosition?(this.setCurrentAnimationIndex(0),this.animState="start"):(this.setCurrentAnimationIndex(Math.max(this.animationList.length,0)),this.animState="end");for(let t of this.animationList)for(let a of t)a.animationState="start"===e.animPosition?0:2}else console.error(`无法获取当前页面，页面索引为: ${this.pgReader.currPageIndex}`)}_animateTo(){if(!this.hasNextAnimation())return;this.currAnimationData=[],"end"===this.animState&&(this.setCurrentAnimationIndex(this.currentAnimIndex+1),this.animState="start");let e=this.animationList[this.currentAnimIndex];for(let t of e){t.animationState=1;let e=new u;e.reset(this.inAnimationPage,this.pgReader.g,t),this.currAnimationData.push(e),1!==t.animType&&3!==t.animType||(t.stressContent=e),this.currentAnimIndex===this.animationList.length-1&&4===t.effectAfterPlay?this.isEffectAfterPlay=!0:this.isEffectAfterPlay=!1}const t=1e3*(Number(e[0].startTime)||0);this.delayAnimationTimer=window.setTimeout((()=>{this._play()}),t)}_play(){if(this.animState="inAnim",this.currAnimationData){let e=!1;for(let t=0;t<this.currAnimationData.length;t++){let a=this.currAnimationData[t],r=a.animInfo,i=Math.ceil(60*r.endTime);(0===a.count||a.count%3==0||a.count%13==0||a.count>=i)&&this.pgReader.paint(!1,this.currAnimationData),a.count+=this.speed,a.count>i?r.animationState=2:e=!0}e?this.animationTimer=requestAnimationFrame((()=>{this._play()})):(this.animState="end",this.animationDest&&this.hasNextAnimation()&&this.isFirstPosPrevSecondPos(this.getCurrentAnimationPosition(),this.animationDest)?this._animateTo():this.animationDest=void 0,this.animationList[this.currentAnimIndex-1]&&3===this.animationList[this.currentAnimIndex-1][0].effectAfterPlay&&(this.delayAnimationTimer=setTimeout((()=>{this.pgReader.paint()}),200)))}else this.animState="end"}}const p=(e,t)=>{let a=document.createElement("canvas");return a.width=2*e,a.height=2*t,a.getContext("2d").setTransform(2,0,0,2,0,0),a.style.width=e+"px",a.style.height=t+"px",a},m=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},g=(e,t=!1)=>{const a=Array.prototype.slice.apply(document.getElementsByClassName(e));if(a.length>0&&t)setTimeout((()=>{for(let e=0;e<a.length;e++)m(a[e])}),0);else if(a.length>0)for(let e=0;e<a.length;e++)m(a[e])};var y=a(497),b=a.n(y),x=a(669),P=a.n(x);const k=new class{constructor(){this.env={activeDoc:-1,activePage:-1},this.resTable=new Map,this.maxConcurrentDownload=4,this.minRetryInterval=5e3,this.maxRetryCount=5,this.loadedFonts=[]}stopDownloadResourceOfDoc(e){const t=[];this.resTable.forEach(((a,r)=>{a.docIndex===e&&t.push(r)}));for(let e of t)this.resTable.delete(e)}setEnvironment(e){this.env=e,this.checkResourceTask()}loadRes(e,t={}){if(this.hasResource(e)){const a=this.getKeyFromResource(e),r=this.resTable.get(a);this.updateResource(e,t),"fetched"===r.state&&this.onResLoaded(r)}else this.addNewResource(e,t.callback)}get resToFetch(){const e=[];return this.resTable.forEach(((t,a)=>{"toFetch"===t.state&&e.push(a)})),e}get resFetching(){const e=[];return this.resTable.forEach(((t,a)=>{"fetching"===t.state&&e.push(a)})),e}getKeyFromResource(e){return`${e.url}_${e.docIndex}`}resourcePriority(e,t){if(!e)return 1;if(!t)return-1;const a=this.getResourcePriorityRate(e),r=this.getResourcePriorityRate(t);return a>r?-1:a<r?1:0}getResourcePriorityRate(e){const t=e.docIndex===this.env.activeDoc,a=e.docIndex===this.env.activeDoc&&e.pageIndexArr.includes(this.env.activePage);let r=0;if(t&&e.pageIndexArr.length>0){r=999;for(let t of e.pageIndexArr)r=Math.min(r,Math.abs(t-this.env.activePage))}let i=0;if(t&&e.pageIndexArr.length>0){i=999;for(let t of e.pageIndexArr)i=Math.min(i,t)}return("summaryJson"===e.type?1e6:0)+(t?1e5:0)+(a?1e4:0)+("pageJson"===e.type?1e3:0)-10*r+i}hasResource(e){const t=this.getKeyFromResource(e);return this.resTable.has(t)}addNewResource(e,t){const a=this.getKeyFromResource(e),r=[];t&&r.push(t);const i=[e.pageIndex];this.resTable.set(a,Object.assign(Object.assign({},e),{pageIndexArr:i,callbacks:r,result:null,state:"toFetch",errorCount:0,lastFailAt:0})),this.checkResourceTask()}updateResource(e,t){const a=this.getKeyFromResource(e),r=this.resTable.get(a);if(!r)return this.addNewResource(e,t.callback);const i=r.pageIndexArr.slice();i.includes(e.pageIndex)||i.push(e.pageIndex);let n=r.callbacks.slice();t.overwriteCb&&t.callback?n=[t.callback]:t.callback&&n.push(t.callback),Object.assign(r,{pageIndexArr:i,callbacks:n}),this.resTable.set(a,r),this.checkResourceTask()}checkResourceTask(){clearTimeout(this.checkTaskTimer),this.checkTaskTimer=setTimeout((()=>{this._checkResourceTask()}),0)}_checkResourceTask(){const e=this.resToFetch.sort(((e,t)=>this.resourcePriority(this.resTable.get(e),this.resTable.get(t))));let t=this.resFetching.length;for(;t<this.maxConcurrentDownload&&0!==e.length;t++)for(let t=0;t<e.length;t++){const a=e[t],r=this.resTable.get(a).lastFailAt;if(0!==r&&Date.now()-r<this.minRetryInterval)continue;const i=e.shift();this.downloadRes(this.resTable.get(i));break}}downloadRes(e){const t=this;if(e.state="fetching","pageJson"===e.type||"summaryJson"===e.type)P().get(e.url).then((t=>{const a=this.getKeyFromResource(e);let r=this.resFetching.indexOf(a);r>-1&&this.resFetching.splice(r,1),e.state="fetched",e.result=t.data,this.onResLoaded(e),this.checkResourceTask()})).catch((function(a){e.errorCount=e.errorCount+1,e.errorCount>=t.maxRetryCount?e.state="failed":e.state="toFetch",e.lastFailAt=Date.now(),t.checkResourceTask()}));else if("image"===e.type){const a=new Image;a.onload=()=>{a.complete&&a.width>0&&a.height>0?(e.result=a,e.state="fetched",this.onResLoaded(e)):(e.errorCount=e.errorCount+1,e.errorCount>=t.maxRetryCount?e.state="failed":e.state="toFetch",e.lastFailAt=Date.now()),this.checkResourceTask()},a.onerror=()=>{e.errorCount=e.errorCount+1,e.errorCount>=t.maxRetryCount?e.state="failed":e.state="toFetch",e.lastFailAt=Date.now(),this.checkResourceTask()},a.src=e.url,a.crossOrigin="anonymous"}else if("font"===e.type){e.state="fetched";let t=e.payload.fontName;if(!t)return console.error("字体下载路径或者字体名字未提供",t);try{if(!this.loadedFonts.includes(t)){const a=document;if(a&&a.fonts&&a.fonts.check&&a.fonts.check(`12px '${t}'`))return void this.loadedFonts.push(t);this.loadedFonts.push(t);const r=`url("${e.url}.ttf")`,i=document.createElement("style");i.setAttribute("type","text/css"),i.appendChild(document.createTextNode("@font-face {\n  font-family: "+t+";\n  src: "+r+";\n}\n")),document.head.appendChild(i)}}catch(e){console.error("字体加载异常",e)}}}onResLoaded(e){if(Array.isArray(e.callbacks))for(let t of e.callbacks)t(e.result);e.callbacks=[]}};var M=function(e,t,a,r){return new(a||(a=Promise))((function(i,n){function s(e){try{l(r.next(e))}catch(e){n(e)}}function o(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};let T=1;class v{constructor(e){this.canvasWidth=100,this.canvasHeight=100,this.zoom=1,this.eventHandlerMap={},this.loadingImage=new Image,this.canvasGifIdsToKeep=new Set,this.loadedImages=new Map,this.jsonToDownload=new Set,this.pageImgToDownload=new Map,this.player=new d(this),this.isMobile=!1,this.paraIdMin=0,this.docIndex=T++,this.pageCount=e.pageCount,this.animationManager=new f(this),this.backgroundColor="rgba(0,0,0,0)",this.loadingImage.src=b(),this.loadingImage.crossOrigin="anonymous",this.fontDownloadPrefix=e.fontDownloadPrefix,document.addEventListener("fullscreenchange",(e=>{this.fullStateListener()})),document.addEventListener("webkitfullscreenchange",(e=>{this.fullStateListener()})),document.onmsfullscreenchange=e=>{this.fullStateListener()}}get docWidth(){return this.doc&&this.doc.pagesize&&this.doc.pagesize.width||100}get docHeight(){return this.doc&&this.doc.pagesize&&this.doc.pagesize.height||100}get isInFullScreenMode(){return document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||!1}get currPage(){return this.doc&&this.doc.pages?this.doc.pages[this.currPageIndex]:void 0}destroy(){this.animationManager.clearAnimation(),k.stopDownloadResourceOfDoc(this.docIndex)}setAnimSpeed(e){this.animationManager.speed=e}updateContainer(e){e?(this.parentWidth=e.offsetWidth,this.parentHeight=e.offsetHeight,this.container||(this.container=e,this.appendElementsInContainer(e)),this.resizeWindow()):(this.parentWidth=100,this.parentHeight=100)}isPageJsonReady(e){return!this.jsonToDownload.has(e)}isPageReady(e){const t=this.pageImgToDownload.get(e);return t&&0===t.length}hasNextPage(){return this.currPageIndex<this.pageCount-1}hasPrevPage(){return this.currPageIndex>0}hasPage(e){return e===Math.round(e)&&e>=0&&e<this.pageCount}gotoPage(e,t={animPosition:"end"}){if(!this.hasPage(e))return console.warn(`gotoPage: 页面${e}不存在`);g("ppt-video"),g("ppt-audio"),this.currPageIndex=e,this.emit("pageChange",t),this.paint(),this.maskg.clearRect(0,0,this.canvasWidth,this.canvasHeight)}nextPage(e={animPosition:"end"}){this.hasNextPage()?this.gotoPage(this.currPageIndex+1,e):console.warn(`nextPage: 已经是最新一页: ${this.currPageIndex}`)}prevPage(e={animPosition:"end"}){this.hasPrevPage()?this.gotoPage(this.currPageIndex-1,e):console.warn(`prevPage: 已经是第一页: ${this.currPageIndex}`)}getCurrPageIndex(){return this.currPageIndex}getAnimationLengthOfPage(e){if(this.doc&&this.doc.pages){const t=this.doc.pages[e];return t&&Array.isArray(t.animation)?t.animation.length:0}return 0}open(e,t){return M(this,void 0,void 0,(function*(){this.suffixUrl=t||"?",this.pageUrlRoot=e.substring(0,e.lastIndexOf("/")+1);const a=e+this.suffixUrl;k.loadRes({url:a,type:"summaryJson",docIndex:this.docIndex,pageIndex:-1},{callback:t=>{if(t&&Array.isArray(t.attr))for(let e of t.attr)if(e&&e.font){let t=e.font;t.startsWith("'")&&t.endsWith("'")&&(t=t.slice(1,t.length-1)),k.loadRes({url:`url("${this.fontDownloadPrefix}${t}.ttf")`,type:"font",docIndex:this.docIndex,pageIndex:-1,payload:{fontName:t}})}this.calcModelSize(t),t.pageCount!==this.pageCount&&console.error(`index.json的页数和传入参数的pageCount不等。传入的pageCount为: ${this.pageCount}, index.json页数为: ${t.pageCount}, url:${e+this.suffixUrl}`)}})}))}enterFullScreen(){const e=document.getElementById("wrapper");if(this.isInFullScreenMode)console.warn("enterFullScreen: 已经处于全屏状态");else{g("ppt-video",!0),g("ppt-audio",!0),g("canvasGif");const t=e.webkitRequestFullScreen||e.requestFullScreen||e.mozRequestFullScreen;document.body.msRequestFullscreen?document.body.msRequestFullscreen.call(e):t.call(e)}}exitFullScreen(){if(this.isInFullScreenMode){const e=document.mozCancelFullScreen||document.exitFullscreen||document.webkitExitFullscreen;document.msExitFullscreen?document.msExitFullscreen.call(document):e.call(document)}else console.warn("exitFullScreen: 已经退出了全屏状态")}getNextAnimationPosition(e){return this.animationManager.getNextAnimationPosition(e)}getPrevAnimationPosition(e){return this.animationManager.getPrevAnimationPosition(e)}gotoAnimation(e,t=!1){return this.animationManager.gotoAnimation(e,t)}hasNextAnimation(){return this.animationManager.hasNextAnimation()}hasPrevAnimation(){return this.animationManager.hasPreAnimation()}paintOnCanvas(e){this.paint(!1,void 0,Object.assign(Object.assign({},e),{skipClear:!0}))}on(e,t){this.eventHandlerMap[e]=this.eventHandlerMap[e]||[],this.eventHandlerMap[e].push(t)}emit(e,...t){const a=this.eventHandlerMap[e]||[];for(const e of a)e(...t)}appendElementsInContainer(e){let t=this.readerWrapper=document.createElement("div");t.id="dcs-pgreader-wrapper",Object.assign(t.style,{background:this.backgroundColor,position:"absolute",left:0,right:0,top:0,bottom:0});let a=this.canvas=p(this.canvasWidth,this.canvasHeight);a.style.background=this.backgroundColor,this.g=a.getContext("2d");let r=this.canvasWrapper=document.createElement("div");r.id="dcs-pgreader-canvaswrapper",Object.assign(r.style,{position:"absolute",left:0,right:0,top:0,bottom:0}),r.appendChild(a);let i=this.mask=p(this.canvasWidth,this.canvasHeight);this.maskg=i.getContext("2d"),i.style.position="absolute",i.style.pointerEvents="none",i.style.left="0px",i.style.top="0px",r.appendChild(i),t.appendChild(r),e.appendChild(t)}resizeWindow(){if(!this.container||!this.doc)return;let e=this.isInFullScreenMode?window.innerWidth:this.parentWidth,t=this.isInFullScreenMode?window.innerHeight:this.parentHeight;e/t>this.docWidth/this.docHeight?e=this.docWidth/this.docHeight*t:t=this.docHeight/this.docWidth*e,this.zoom=e/this.docWidth,requestAnimationFrame((()=>{this.canvasWidth=e,this.canvasHeight=t,this.resizeCanvas(e,t),this.paint()}))}resizeCanvas(e,t){this.viewHeight=t,this.canvasWidth=e,this.canvasHeight=t;let a=this.canvas,r=this.mask;a.width=2*e,a.height=2*this.canvasHeight,this.g.setTransform(2,0,0,2,0,0),a.style.width=e+"px",a.style.height=this.canvasHeight+"px",r.width=a.width,r.height=a.height,this.maskg.setTransform(2,0,0,2,0,0),r.style.width=a.style.width,r.style.height=a.style.height}calcModelSize(e){if(e.ref){let t=e.refById=Object.create(null);for(let a of e.ref)t[a.id]=a}e.refById||(e.refById=Object.create(null));let t=e.attrById=Object.create(null);for(let a of e.attr)t[a.id]=a;let a=e.pagesize,r=a.width,i=a.height,n=r,s=Object.create(null);if(a.special)for(let e of a.special)s[e.index]=e,n<e.width&&(n=e.width);let o=0,l=e.pageCount,c=10,h=e.pages=[];for(let e=0;e<l;e++){let t=Object.create(null);t.index=e,s[e]?(t.width=s[e].width,t.height=s[e].height):(t.width=r,t.height=i),o+=t.height+10,h[e]=t,t.y=c,t.x=(n-t.width)/2,c+=t.height+10}e.maxPageWidth=n,e.docHeight=o,this.doc=e,this.isCopy=!e.param.antiCopy,this.resizeWindow(1),this.preloadPages()}preloadPages(){return M(this,void 0,void 0,(function*(){const e=this.doc.pages;for(let t=0;t<e.length;t++)this.loadPageData(e[t])}))}loadPageData(e){this.jsonToDownload.add(e.index),k.loadRes({url:this.pageUrlRoot+e.index+".json"+this.suffixUrl,pageIndex:e.index,docIndex:this.docIndex,type:"pageJson"},{callback:t=>{this.jsonToDownload.delete(e.index),this.pageImgToDownload.set(e.index,[]),this.parsePageData(e,t),this.repaintPage(e)}})}paint(e,t,a){a||k.setEnvironment({activeDoc:this.docIndex,activePage:this.currPageIndex});let r=a?a.ctx:this.g,i=a&&this.canvas?a.ctx.canvas.width/this.canvas.width:1;if(!this.doc||!this.doc.pages)return;let n,s=a?a.pageIndex:this.currPageIndex,o=this.doc.pages[s];if(!o||!this.isPageJsonReady(o.index))return this.paintBlankImage(r,a,i);if(a&&a.skipClear||r.clearRect(0,0,3*r.canvas.width,3*r.canvas.height),r.save(),r.setTransform(2*this.zoom*i,0,0,2*this.zoom*i,0,0),a&&a.transforms&&r.transform(...a.transforms),r.lineWidth=1,n=(this.viewHeight/this.zoom-this.doc.pagesize.height)/2,r.fillStyle="#FFFFFF",r.strokeStyle="#CECECE",r.fillRect(o.x,n,o.width,o.height),r.strokeRect(o.x,n,o.width,o.height),r.fillStyle="black",r.beginPath(),r.rect(o.x,n,o.width,o.height),r.clip(),r.translate(o.x,n),!e){const e=!a||!a.hasOwnProperty("keepAnimState")||a.keepAnimState;this.paintPage(r,o,t,!!a,e)}r.restore()}paintBlankImage(e,t,a){const r=this.loadingImage;r&&r.complete&&r.width>0&&r.height>0&&(e.save(),e.setTransform(2*this.zoom*a,0,0,2*this.zoom*a,0,0),t&&t.transforms&&e.transform(...t.transforms),e.drawImage(r,0,0,this.canvas.width/2,this.canvas.height/2),e.restore())}paintPage(e,t,a,r,i){let n=this.player;this.canvasGifIdsToKeep.clear();for(let s of t.layers)for(let o of s)if(void 0===o.ref||(o=this.doc.refById[o.ref],o)){if(o.shapeID){let s,l,c,h,d,u,f,p,m;for(let e of t.animation){let t=!1;for(let a of e)if(o.shapeID===a.shapeID){if(Number(a.paraIdx)>=0&&o.meta&&o.meta[2]!==a.newParaIdx)continue;if(-1===a.animTargetType&&-1===a.paraIdx&&0===o.t&&4===o.meta.length&&0!==o.meta[1]&&!a.isGroup||a.paraIdx>=0&&0!==o.t)continue;if(s=r&&!i?2:a.animationState,d=a.animTargetType,l=a.animType,h=Number(a.oldParaIdx),f=a.isBackAfterPlay,m=a.effectAfterPlay,p=a.animIdx,1!==l&&3!==l||(c=a.stressContent),2===s)continue;t=!0;break}if(t)break}if(a&&(u=a[h]),1===s&&u&&(e.save(),1===u.animInfo.animDir&&2===u.animInfo.animType&&18===u.animInfo.animIdx||0===u.animInfo.animDir&&0===u.animInfo.animType&&18===u.animInfo.animIdx?(this.switchPaintType(e,t,o,{c:u}),n.play(u)):(n.play(u),this.switchPaintType(e,t,o,{c:u})),e.restore()),1===s)continue;if(0===s&&0===l)continue;if(2===s&&(2===l||!0===f))continue;if(2===s&&0===l&&12===p)continue;if(2===s&&(3===m||4===m))continue;if(2===s&&(1===l||3===l)){e.save(),c.count=60*c.animInfo.endTime,n.play(c),this.switchPaintType(e,t,o,{c:u}),e.restore();continue}}this.switchPaintType(e,t,o,{isThumbnail:r})}r||((e,t)=>{const a=Array.prototype.slice.apply(document.getElementsByClassName("canvasGif"));for(let e=0;e<a.length;e++)a[e].id&&(t.has(Number(a[e].id))||t.has(a[e].id.toString()))||m(a[e])})(0,this.canvasGifIdsToKeep)}switchPaintType(e,t,a,r){switch(a.t){case 0:this.paintText(e,t,a);break;case 1:this.paintImage(e,t,a,r);break;case 2:this.paintPath(e,t,a)}}paintText(e,t,a){let r=a.v+"";""==r&&(r=" "),e.save();let n=this.doc.attrById[a.aid||0];n.gfont||(n.gfont=this.calcTextFont(n));let s=e.fillStyle,o=a.ctm,l=1;if(a.clip){let t=Object.create(null);t.v=a.clip,i.paintPath(e,t),e.clip()}o&&e.transform(o[0],o[1],o[2],o[3],o[4],o[5]),n.color&&("#000001"===e.strokeStyle?e.fillStyle=s:e.fillStyle=n.color),a.alpha&&(e.globalAlpha=a.alpha*e.globalAlpha),"#000004"===e.strokeStyle?e.font="900 "+n.gfont.replace("bold",""):e.font=n.gfont.replace("900","");let c=a.y,h=a.charX,d=a.startX,u=[];if(2==r.length&&r.charCodeAt(0)>=55296&&r.charCodeAt(0)<56320&&r.charCodeAt(1)>=56320&&r.charCodeAt(1)<57344)e.fillText(r,a.startX,c);else if(h){if(!a.parsedCharx){u.push(a.startX);for(let e=0;e<h.length;e++)if(e==h.length-1)"number"==typeof h[e]&&u.push(h[e]);else if("number"==typeof h[e+1])d=h[e],u.push(d);else{let t=parseInt(h[e+1].replace("g",""));for(let a=1;a<t+1;a++)d+=h[e],u.push(d);e++}a.parsedCharx=u}if(r.length>1e3)e.fillText(r,a.startX,c);else for(let t=0;t<r.length;t++)t<r.length-1?e.fillText(r[t],a.parsedCharx[t],c,a.parsedCharx[t+1]-a.parsedCharx[t]):e.fillText(r[t],a.parsedCharx[t],c)}else e.fillText(r[0],a.startX,c);e.restore(),e.fillStyle=s}calcTextFont(e){let t="";return e.b&&(t+="bold "),e.i&&(t+="italic "),t+=e.size+"px ",t+=e.font,t}paintImage(e,t,a,r){try{let t=a.mediaPath;if(!r.isThumbnail&&t&&!this.isMobile)return this.createMedia(e,t,a);if((a.v.match(/GIF/)||a.v.match(/gif/))&&!r.isThumbnail&&a.rect[2]*this.zoom<e.canvas.clientWidth-20&&a.rect[3]*this.zoom<e.canvas.clientHeight-20&&(r.c&&60*r.c.animInfo.endTime<=r.c.count||!r.c))return void this.createGif(a);let n=this.loadedImages.get(a.v);if(a.alpha&&(e.globalAlpha=a.alpha*e.globalAlpha),n){e.save();let t=a.ctm;if(a.clip){let t=Object.create(null);t.v=a.clip,i.paintPath(e,t),e.clip()}t&&e.transform(t[0],t[1],t[2],t[3],t[4],t[5]);let r=a.rect;a.alpha&&(e.globalAlpha=a.alpha),a.repeat?(e.fillStyle=e.createPattern(n,"repeat"),e.fillRect(r[0],r[1],r[2],r[3])):e.drawImage(n,r[0],r[1],r[2],r[3]),e.restore(),e.globalAlpha=1}}catch(e){console.error("paint image error",e)}}paintPath(e,t,a){e.save();let r,n=a.ctm;if(a.clip){let t=Object.create(null);t.v=a.clip,i.paintPath(e,t),e.clip()}switch(i.paintPath(e,a),e.lineWidth=a.lineWidth,e.lineCap=a.lineCap,e.globalAlpha&&e.globalAlpha>0&&(e.globalAlpha=a.alpha?a.alpha*e.globalAlpha:e.globalAlpha),a.dashArr&&e.setLineDash(a.dashArr),a.type){case 1:!this.isInFullScreenMode||"#000001"!==e.strokeStyle&&"#000002"!==e.strokeStyle&&"#00000b"!==e.strokeStyle?(e.strokeStyle=a.paintInfo.replace("rgb(","rgba("),e.stroke()):(e.strokeStyle=e.fillStyle,e.stroke());break;case 2:!this.isInFullScreenMode||"#000001"!==e.strokeStyle&&"#000002"!==e.strokeStyle&&"#00000a"!==e.strokeStyle?(e.fillStyle=a.paintInfo.replace("rgb(","rgba("),e.fill("evenodd")):e.fill("evenodd");break;case 3:e.translate(a.rect[0],a.rect[1]),r=this.loadedImages.get(a.paintInfo),r&&((r.width>a.rect[2]||r.height>a.rect[3])&&e.scale(a.rect[2]/r.width,a.rect[3]/r.height),e.strokeStyle=e.createPattern(r,"repeat"),e.stroke()),e.translate(-a.rect[0],-a.rect[1]);break;case 4:e.translate(a.rect[0],a.rect[1]),r=this.loadedImages.get(a.paintInfo),r&&(n&&e.scale(n[0],n[1]),(r.width>a.rect[2]||r.height>a.rect[3])&&e.scale(a.rect[2]/r.width,a.rect[3]/r.height),e.fillStyle=e.createPattern(r,"repeat"),e.fill()),e.translate(-a.rect[0],-a.rect[1]);break;case 5:s(e,a.paintInfo,a.rect,a.v,"stroke");break;case 6:s(e,a.paintInfo,a.rect,a.v,"fill");break;case 7:o(e,a.paintInfo,a.rect,a.v,"stroke");break;case 8:o(e,a.paintInfo,a.rect,a.v,"fill")}e.restore(),e.lineWidth=.5,e.setLineDash([])}createMedia(e,t,a){try{const t=(this.viewHeight/this.zoom-this.doc.pagesize.height)/2,r=this.loadedImages.get(a.v),i=this.zoom;r&&e.drawImage(r,a.rect[0]*i,(a.rect[1]+t)*i,a.rect[2]*i,a.rect[3]*i)}catch(e){console.error("create media error",e)}}createGif(e){let t=(this.viewHeight/this.zoom-this.doc.pagesize.height)/2,a=e.shapeID+e.rect[0]+e.rect[1],r=this.zoom,i=this.pageUrlRoot+e.v+this.suffixUrl,n=e.rect[2]*r,s=e.rect[3]*r,o=document.getElementById(a);this.canvasGifIdsToKeep.add(a),o?Object.assign(o,{left:(e.rect[0]+e.rect[2]/2)*r-n/2+"px",top:(e.rect[1]+t)*r+"px",width:n+"px",height:s+"px"}):(o=document.createElement("img"),o.src=i,o.id=a,o.className="canvasGif",Object.assign(o.style,{position:"absolute",left:(e.rect[0]+e.rect[2]/2)*r-n/2+"px",top:(e.rect[1]+t)*r+"px",width:n+"px",height:s+"px"}),this.canvasWrapper.append(o),e.ctm&&Object.assign(o.style,{transform:`matrix(${e.ctm[0]},${e.ctm[1]},${e.ctm[2]},${e.ctm[3]},0,0)`}))}parsePageData(e,t){Object.assign(e,t);let a,r,i,n,s,o=Object.create(null),l="",c=Object.create(null);if(!e.layers[1])return;for(let t of e.layers[1]){switch(t.t){case 0:a=t.charx,r=c[t.y],r?r.height<t.h&&(r.height=t.h):(r=Object.create(null),r.y=t.y,r.height=t.h,r.chars=[],r.phrases=[],c[t.y]=r);let e=t.charX,o=1,h=t.startX;if(i=t.v,n=Object.create(null),i&&(n.t=i[0]),n.x=h,s=Object.create(null),s.t=t.v,s.x=h,t.hyperlinkAddress&&(n.hyperlinkAddress=t.hyperlinkAddress),n.width=this.lastCharWidth(t.h),r.chars.push(n),e){for(let a=0;a<e.length;a++)if(a==e.length-1)"number"==typeof e[a]&&(n=Object.create(null),t.hyperlinkAddress&&(n.hyperlinkAddress=t.hyperlinkAddress),n.t=i[o],n.x=e[a],n.width=this.lastCharWidth(t.h),r.chars.push(n));else if("number"==typeof e[a+1])n=Object.create(null),t.hyperlinkAddress&&(n.hyperlinkAddress=t.hyperlinkAddress),h=e[a],n.t=i[o],n.x=h,n.width=e[a+1]-e[a],r.chars.push(n),o++;else{let s=parseInt(e[a+1].replace("g",""));for(let l=1;l<s+1;l++)n=Object.create(null),t.hyperlinkAddress&&(n.hyperlinkAddress=t.hyperlinkAddress),h+=e[a],n.t=i[o],n.x=h,n.width=e[a],r.chars.push(n),o++;a++}let a=e.length-1;if("number"==typeof e[a])s.width=e[a]-s.x+this.lastCharWidth(t.h);else{let t=parseInt(e[a].replace("g",""));s.width=1!==a?e[a-2]-s.x+e[a-1]*(t+1):e[a-1]*(t+1)}}else t.ctm&&t.ctm[0]&&1!==t.ctm[0]?s.width=this.lastCharWidth(t.ctm[0]*t.h):s.width=n.width;t.meta&&(s.meta=t.meta,t.meta[0]<0&&(r.type=-1)),r.phrases.push(s),l+=t.v}t.shapeID&&(o[t.shapeID]||(o[t.shapeID]=[]),o[t.shapeID].push(t))}let h=[];for(let e in c){let t;c[e].x=c[e].chars[0].x;for(let a=0;a<c[e].chars.length;a++)t&&(t.width=c[e].chars[a].x-t.x),t=c[e].chars[a];c[e].width=c[e].chars[c[e].chars.length-1].x-c[e].chars[0].x+c[e].chars[c[e].chars.length-1].width,h.push(c[e])}h.sort(this.yComparator),e.lines=h,e.text=l;for(let t in o){let a=[];for(let r of e.animation)if(Number(t)===r.shapeID){let e=o[t],i=Number(r.paraIdx);if(i>=0){0===a.length&&(a=this.paraDataSolve(e));let t=a[i];t?(r.shape=this.solveRectAimate(r.rect),r.textInfo=this.solveTextInfo(this.solveAimate(t))):r.error=!0,r.newParaIdx=Number(r.paraIdx)+Number(this.paraIdMin)}else r.shape=this.solveRectAimate(r.rect);"{}"!==JSON.stringify(r.emphAttr)?r.direct=[r.emphIdx,r.emphAttr]:r.direct=r.animDir,Number(r.startTime)<Number(r.endTime)&&(r.endTime=Number(r.endTime)-Number(r.startTime),16===r.animIdx&&r.endTime<.5&&(r.endTime=.5)),4!==r.animType||r.error||(r.error=!0)}}let d=[],u=[];for(let t=0;t<e.animation.length;t++){let a=e.animation[t];if(u.push(a),t===e.animation.length-1){d.push(u);break}let r=e.animation[t+1];0!==r.startCondition&&2!==r.startCondition||(d.push(u),u=[])}for(let e=d.length-1;e>=0;e--){let t=d[e];for(let e=t.length-1;e>=0;e--){let a=t[e];a.oldParaIdx=e,a.error&&t.splice(e,1)}0===t.length&&d.splice(e,1)}e.animation=d,this.emit("animationListChange",e),this.loadPageImage(e)}yComparator(e,t){return e.y>t.y?1:e.y<t.y?-1:0}calTextHeightOffset(e){return 2*Math.round(e/10)}lastCharWidth(e){return e-1*Math.round(e/10)}loadPageImage(e){return M(this,void 0,void 0,(function*(){for(let t of e.layers)for(let a of t)if(!a.ref||(a=this.doc.refById[a.ref],a))switch(a.t){case 1:this.loadImage(e,a.v);break;case 2:4!==a.type&&3!==a.type||"string"!=typeof a.paintInfo||a.paintInfo.includes("rgb")||this.loadImage(e,a.paintInfo)}}))}loadImage(e,t){let a=this.pageImgToDownload.get(e.index)||[];a.includes(t)||a.push(t),this.pageImgToDownload.set(e.index,a),k.loadRes({type:"image",url:this.pageUrlRoot+t+this.suffixUrl,pageIndex:e.index,docIndex:this.docIndex},{callback:r=>{a=this.pageImgToDownload.get(e.index)||[];const i=a.indexOf(t);i>-1&&a.splice(i,1),this.pageImgToDownload.set(e.index,a),this.loadedImages.set(t,r),this.repaintPage(e)},overwriteCb:!1})}repaintPage(e){e.index!==this.currPageIndex||this.animationManager.isDuringAnimation()||(clearTimeout(this.repaintTimer),this.repaintTimer=setTimeout((()=>{this.paint()}),100))}fullStateListener(){this.isInFullScreenMode||(this.autoAimatePlay=!1,g("ppt-video"),g("ppt-audio"),this.animationManager.clearAnimation())}solveRectAimate(e){let t=Object.create(null);return t.textRect=Object.create(null),t.textRect.x=e[0],t.textRect.y=e[1],t.textRect.width=e[2],t.textRect.height=e[3],t.shapeRect=Object.create(null),t.shapeRect.x=e[0],t.shapeRect.y=e[1],t.shapeRect.width=e[2],t.shapeRect.height=e[3],t}solveTextInfo(e){if(!e)return;let t=[],a=e.textRect;return t[0]=a.x,t[1]=a.y,t[2]=a.width,t[3]=a.height,t}solveAimate(e){let t;if(1===e.length)t=this.solveAimateEach(e[0]);else{let a=[];for(let t of e)a.push(this.solveAimateEach(t));t=this.calAllFlyerRect(a)}if(t)return t.shapeRect&&!t.textRect?(t.textRect=Object.create(null),t.textRect.x=t.shapeRect.x,t.textRect.y=t.shapeRect.y,t.textRect.width=t.shapeRect.width,t.textRect.height=t.shapeRect.height):!t.shapeRect&&t.textRect&&(t.shapeRect=Object.create(null),t.shapeRect.x=t.textRect.x,t.shapeRect.y=t.textRect.y,t.shapeRect.width=t.textRect.width,t.shapeRect.height=t.textRect.height),t}calAllFlyerRect(e){let t=this.textOrShape(e[0]);for(let a=1;a<e.length;a++){let r=this.textOrShape(e[a]);r.x1<t.x1&&(t.x1=r.x1),r.y1<t.y1&&(t.y1=r.y1),r.x2>t.x2&&(t.x2=r.x2),r.y2>t.y2&&(t.y2=r.y2)}let a=Object.create(null);return a.shapeRect=Object.create(null),a.shapeRect.x=t.x1,a.shapeRect.y=t.y1,a.shapeRect.width=t.x2-t.x1,a.shapeRect.height=t.y2-t.y1,a}textOrShape(e){let t=Object.create(null);return e.shapeRect&&!e.textRect?(t.x1=e.shapeRect.x,t.y1=e.shapeRect.y,t.x2=e.shapeRect.width+e.shapeRect.x,t.y2=e.shapeRect.height+e.shapeRect.y):!e.shapeRect&&e.textRect&&(t.x1=e.textRect.x,t.y1=e.textRect.y,t.x2=e.textRect.width+e.textRect.x,t.y2=e.textRect.height+e.textRect.y),t}solveAimateEach(e){let t;switch(e.t){case 0:t=this.calAnimateTextInfo(e);break;case 1:t=this.calAnimateImageInfo(e);break;case 2:t=this.calAnimatePathInfo(e)}return t}calAnimatePathInfo(e){let t=Object.create(null);return t.shapeRect=Object.create(null),t.shapeRect.x=e.rect[0],t.shapeRect.y=e.rect[1],t.shapeRect.width=e.rect[2],t.shapeRect.height=e.rect[3],t}calAnimateImageInfo(e){let t=Object.create(null);return t.shapeRect=Object.create(null),t.shapeRect.x=e.rect[0],t.shapeRect.y=e.rect[1],t.shapeRect.width=e.rect[2],t.shapeRect.height=e.rect[3],t}calAnimateTextInfo(e){let t,a,r,i,n=Object.create(null);t=e.charx,a=n[e.y],a?a.height<e.h&&(a.height=e.h):(a=Object.create(null),a.y=e.y,a.height=e.h,a.chars=[],n[e.y]=a);let s=e.charX,o=1,l=e.startX;if(r=e.v,i=Object.create(null),i.t=r[0],i.x=l,i.width=this.lastCharWidth(e.h),a.chars.push(i),s)for(let t=0;t<s.length;t++)if(t==s.length-1)"number"==typeof s[t]&&(i=Object.create(null),i.t=r[o],i.x=s[t],i.width=this.lastCharWidth(e.h),a.chars.push(i));else if("number"==typeof s[t+1])i=Object.create(null),l=s[t],i.t=r[o],i.x=l,i.width=s[t+1]-s[t],a.chars.push(i),o++;else{let e=parseInt(s[t+1].replace("g",""));for(let n=1;n<e+1;n++)i=Object.create(null),l+=s[t],i.t=r[o],i.x=l,i.width=s[t],a.chars.push(i),o++;t++}let c=[];for(let e in n){let t;n[e].x=n[e].chars[0].x;for(let a=0;a<n[e].chars.length;a++)t&&(t.width=n[e].chars[a].x-t.x),t=n[e].chars[a];n[e].width=n[e].chars[n[e].chars.length-1].x-n[e].chars[0].x+n[e].chars[n[e].chars.length-1].width,c.push(n[e])}c.sort(this.yComparator);for(let e of c)e.y=e.y-e.height+this.calTextHeightOffset(e.height);let h=Object.create(null);return h.textRect=Object.create(null),h.textRect.x=c[0].x,h.textRect.y=c[0].y,h.textRect.width=c[0].width,h.textRect.height=c[0].height,h}paraDataSolve(e){let t={};for(let a of e)a.meta&&(t[a.meta[2]]||(t[a.meta[2]]=[]),t[a.meta[2]].push(a));let a=[];for(let e in t)a.push(e);a.sort(((e,t)=>e-t));let r=this.paraIdMin=Number(a[0]),i=[];for(let e=0;e<a.length;e++)i[Number(a[e])-r]=t[a[e]];return i}}v.loadedFonts=new Set;const I=v})(),r.default})()}));
//# sourceMappingURL=pptRenderer_v3.5.2.js.map

/** 
 Git Hash: 19d580e8370ba2115c6c05d736806d032454c1e1
 Create At: 9/29/2021, 3:55:04 PM
*/
