{"version":3,"file":"index.js","mappings":"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","sources":["webpack://NERTCReplay/webpack/universalModuleDefinition","webpack://NERTCReplay/./src/component/Control.tsx","webpack://NERTCReplay/./src/component/VideoBox.tsx","webpack://NERTCReplay/./src/component/VideoGroup.tsx","webpack://NERTCReplay/./src/utils/TickTick.ts","webpack://NERTCReplay/./src/utils/index.ts","webpack://NERTCReplay/./node_modules/css-loader/dist/runtime/api.js","webpack://NERTCReplay/./node_modules/css-loader/dist/runtime/cssWithMappingToString.js","webpack://NERTCReplay/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://NERTCReplay/./node_modules/eventemitter3/index.js","webpack://NERTCReplay/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://NERTCReplay/./src/component/Control.less","webpack://NERTCReplay/./src/component/Replay.less","webpack://NERTCReplay/./src/component/VideoBox.less","webpack://NERTCReplay/./src/component/Control.less?66eb","webpack://NERTCReplay/./src/component/Replay.less?afb3","webpack://NERTCReplay/./src/component/VideoBox.less?ecc4","webpack://NERTCReplay/./src/assets/audio.svg","webpack://NERTCReplay/./src/assets/pause.svg","webpack://NERTCReplay/./src/assets/play.svg","webpack://NERTCReplay/./src/assets/video.svg","webpack://NERTCReplay/external \"RecordPlayer\"","webpack://NERTCReplay/external \"react\"","webpack://NERTCReplay/webpack/bootstrap","webpack://NERTCReplay/webpack/runtime/compat get default export","webpack://NERTCReplay/webpack/runtime/define property getters","webpack://NERTCReplay/webpack/runtime/hasOwnProperty shorthand","webpack://NERTCReplay/webpack/runtime/make namespace object","webpack://NERTCReplay/./src/component/Replay.tsx"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"RecordPlayer\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"RecordPlayer\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NERTCReplay\"] = factory(require(\"react\"), require(\"RecordPlayer\"));\n\telse\n\t\troot[\"NERTCReplay\"] = factory(root[\"react\"], root[\"RecordPlayer\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE_react__, __WEBPACK_EXTERNAL_MODULE_RecordPlayer__) {\nreturn ","import React, { createRef } from 'react'\r\nimport PAUSE_BASE_64 from '../assets/pause.svg'\r\nimport PLAY_BASE_64 from '../assets/play.svg'\r\nimport './Control.less'\r\n\r\nimport {getTime} from '../utils'\r\n\r\ninterface IProps {\r\n  currTime: number,\r\n  playing: boolean,\r\n  start: number,\r\n  speed: number\r\n  end: number\r\n  onPlay: Function\r\n  onPause: Function\r\n  onSetSpeed: (speed: number) => any\r\n  onSeekTo: (time: number) => any\r\n}\r\n\r\ninterface IStates {\r\n  duration: number// 起止时间\r\n  showLabel: boolean\r\n  labelLeft: number\r\n  labelText: string\r\n  drag: boolean\r\n  speedOptionShow: boolean\r\n}\r\n\r\nexport default class Control extends React.Component<IProps, IStates> {\r\n  toolUIEl = createRef()\r\n  speedOptionHideTimer: any\r\n\r\n  constructor(props: IProps) {\r\n    super(props)\r\n    const { start, end } = props\r\n    this.state = {\r\n      duration: end - start,\r\n      showLabel: false,\r\n      labelLeft: 0,\r\n      labelText: '',\r\n      speedOptionShow: false,\r\n      drag: false\r\n    }\r\n  }\r\n\r\n  onMouseMove = (e: React.MouseEvent | React.TouchEvent) => {\r\n    const {currentX, currentTime} = this.getCurrentXAndTime(e)\r\n    let [labelText] = getTime(currentTime)\r\n\r\n    this.setState({\r\n      labelLeft: currentX,\r\n      labelText: labelText,\r\n    })\r\n  }\r\n\r\n  pauseOrPlay = (e: React.MouseEvent) => {\r\n    if (this.props.playing) {\r\n      this.props.onPause()\r\n    } else {\r\n      this.props.onPlay()\r\n    }\r\n  }\r\n\r\n  onMouseDown = (e: React.MouseEvent | React.TouchEvent) => {\r\n    let role = (e.target! as HTMLDivElement).getAttribute('role')\r\n    if (role === 'slider') {\r\n      this.setState({\r\n        showLabel: true,\r\n        drag: true\r\n      })\r\n      this.onMouseMove(e)\r\n    }\r\n  }\r\n\r\n  onMouseUp = (e: React.MouseEvent | React.TouchEvent) => {\r\n    if (this.state.drag) {\r\n      this.seekTo(e)\r\n    }\r\n    this.hidePosition(e)\r\n  }\r\n\r\n  handleClickSpeed = (e: React.MouseEvent) => {\r\n    this.setState({\r\n      speedOptionShow: !this.state.speedOptionShow\r\n    })\r\n  }\r\n\r\n  handleClickSpeedOption = (ev: React.MouseEvent, speed) => {\r\n    ev.stopPropagation()\r\n    this.setState({\r\n      speedOptionShow: false\r\n    })\r\n    this.props.onSetSpeed(speed)\r\n  }\r\n\r\n  showPosition = (e: React.MouseEvent) => {\r\n    this.setState({\r\n      showLabel: true\r\n    })\r\n    this.onMouseMove(e)\r\n  }\r\n  \r\n  hidePosition = (e: React.MouseEvent | React.TouchEvent) => {\r\n    this.setState({\r\n      showLabel: false\r\n    })\r\n  }\r\n\r\n  seekTo = (e: React.MouseEvent | React.TouchEvent) => {\r\n    let { currentX, currentTime } = this.getCurrentXAndTime(e)\r\n    this.props.onSeekTo(currentTime)\r\n\r\n    let updator: any = {\r\n      labelLeft: currentX,\r\n      time: currentTime,\r\n      drag: false,\r\n    }\r\n    // 如果是鼠标事件，不隐藏光标\r\n    this.setState(updator)\r\n  }\r\n\r\n  getCurrentXAndTime = (e: React.MouseEvent | React.TouchEvent) => {\r\n    let currentX = 0\r\n    let left = (this.toolUIEl.current as HTMLElement).getBoundingClientRect().left\r\n    if (e.type.search(/mouse|click/) > -1) {\r\n      currentX = (e as React.MouseEvent).clientX - left\r\n    } else {\r\n      currentX = (e as React.TouchEvent).touches[0].clientX - left\r\n    }\r\n\r\n    let fullWidth = (this.toolUIEl.current as HTMLDivElement).offsetWidth\r\n    // 防止越界\r\n    if (currentX < 0) {\r\n      currentX = 0\r\n    }\r\n    if (currentX > fullWidth) {\r\n      currentX = fullWidth\r\n    }\r\n\r\n    const currentTime = this.state.duration * (currentX / fullWidth)\r\n\r\n    return {\r\n      currentX,\r\n      currentTime\r\n    }\r\n  }\r\n\r\n  renderSpeed() {\r\n    const speedText = this.props.speed === 1 ? '倍数' : `${this.props.speed}x`\r\n    const speedArr = [2, 1.5, 1.25, 1, 0.75, 0.5]\r\n    return (\r\n      <div \r\n        className='player-speed'\r\n        onClick={this.handleClickSpeed}\r\n      >\r\n        <div className='player-speed-text'>{speedText}</div>\r\n        {this.state.speedOptionShow && (\r\n          <div className='player-speed-options'>\r\n            {speedArr.map(speed => {\r\n              return (\r\n                <div className='option' key={speed} onClick={(ev) => this.handleClickSpeedOption(ev, speed)}>{speed}x</div>\r\n              )\r\n            })}\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderTimeline = (widthPercent) => {\r\n    const { showLabel, labelLeft, labelText, drag } = this.state\r\n\r\n    return (\r\n      <div\r\n        ref={this.toolUIEl as React.RefObject<HTMLDivElement>}\r\n        className='player-timeline'\r\n        onClick={this.seekTo}\r\n        onMouseEnter={this.showPosition}\r\n        onMouseLeave={this.hidePosition}\r\n        onMouseDown={this.onMouseDown}\r\n        onMouseMove={this.onMouseMove}\r\n        onTouchStart={this.onMouseDown}\r\n        onTouchMove={this.onMouseMove}\r\n        onTouchEnd={this.onMouseUp}\r\n        role=\"timeline\"\r\n      >\r\n        <span \r\n          role=\"currentLabel\" \r\n          className='player-timeline-label'\r\n          style={{\r\n            display: showLabel ? 'inline-block' : 'none',\r\n            left: `${labelLeft}px`\r\n          }}\r\n        >\r\n          {labelText}\r\n        </span>\r\n        <span \r\n          role=\"label-background\" \r\n          className='player-timeline-bg' \r\n          style={{\r\n            display: showLabel ? 'inline-block' : 'none',\r\n            height: 20,\r\n            left: `${labelLeft}px`\r\n          }}\r\n        />\r\n        <div \r\n          role=\"blue-line\" \r\n          className='player-timeline-blueline' \r\n          style={{\r\n            width: `${widthPercent + '%'}`\r\n          }}\r\n        />\r\n        <div \r\n          role=\"slider\" \r\n          className='player-timeline-slider'\r\n          style={{\r\n            left: `${drag ? labelLeft + 'px' : widthPercent + '%'}`,\r\n            backgroundClip: `${drag ? 'border-box' : 'content-box'}`\r\n          }}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderPlayOrPause = () => {\r\n    return (\r\n      <div\r\n        className='player-play-icon-wrapper'\r\n        role=\"icon\"\r\n        onClick={this.pauseOrPlay}\r\n      >\r\n        <span\r\n          className='player-play-icon'\r\n          style={{\r\n            backgroundImage: `url(${(this.props.playing ? PAUSE_BASE_64 : PLAY_BASE_64)})`\r\n          }}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { duration } = this.state\r\n    const time = this.props.currTime\r\n\r\n    let widthPercent = 0\r\n    if (time >= duration) {\r\n      widthPercent = 100\r\n    } else if (time <= 0) {\r\n      widthPercent = 0\r\n    } else {\r\n      widthPercent = time / duration * 100\r\n    }\r\n\r\n    \r\n    let timeDuration: string\r\n    if (time > duration) {\r\n      let [durationStr] = getTime(duration)\r\n      timeDuration = durationStr + '/' + durationStr\r\n    } else {\r\n      let [durationStr, durationHour] = getTime(duration)\r\n      let [currentStr] = getTime(time, durationHour > 0)\r\n      timeDuration = currentStr + '/' + durationStr\r\n    }\r\n\r\n    return (\r\n      <div className=\"player-container\">\r\n        {this.renderPlayOrPause()}\r\n        {this.renderTimeline(widthPercent)}\r\n        {this.renderSpeed()}\r\n        <div role=\"duration\" className='player-duration'>\r\n          {timeDuration}\r\n        </div>\r\n      </div >\r\n    )\r\n  }\r\n}\r\n","import React, { createRef, RefObject } from 'react'\r\n\r\nimport './VideoBox.less'\r\n\r\ninterface IProps {\r\n    url: string\r\n    name: string\r\n    role: 'student' | 'teacher' | 'host' | 'audience'\r\n    /**\r\n     * 回放页面是否处于播放状态\r\n     */\r\n    playing: boolean\r\n    /**\r\n     * 是否因为events，或者当前时间不处于视频时间范围内，需要隐藏该视频\r\n     */\r\n    hidden: boolean\r\n    speed: number\r\n    onWait: Function\r\n    onCanPlay: Function\r\n    /**\r\n     * 上一次校准的播放位置。位置为0时，对应着视频的起点位置\r\n     */\r\n    syncAt: number\r\n    /**\r\n     * 上一次校准时的绝对时间\r\n     * 目前视频文件的播放位置应为 new Date().valueOf() - syncTimestamp + syncAt\r\n     * \r\n     * 校准时间点为play, pause\r\n     */\r\n    syncTimestamp: number\r\n    needControl?: boolean\r\n}\r\n\r\nconst observeAt = '李四'\r\n\r\nexport default class VideoBox extends React.Component<IProps> {\r\n    videoRef: RefObject<HTMLVideoElement> = createRef()\r\n    state = {\r\n        videoOn: true,\r\n        audioOn: true,\r\n        playing: false,\r\n        speed: 1\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.playing) {\r\n            this.play()\r\n        }\r\n        console.log(this.props)\r\n        this.setPlaySpeed(this.props.speed)\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.playing && !this.state.playing) {\r\n            this.play()\r\n        } else if (!nextProps.playing && this.state.playing) {\r\n            this.pause()\r\n        } else if (nextProps.syncTimestamp !== this.props.syncTimestamp) {\r\n            this.calibrate(nextProps)\r\n        }\r\n\r\n        if (nextProps.speed !== this.state.speed) {\r\n            this.setPlaySpeed(nextProps.speed)\r\n        }\r\n    }\r\n\r\n    play() {\r\n        if (this.props.name.toString() === observeAt) {\r\n            console.log('李四 play', this.props)\r\n        }\r\n\r\n        if (this.videoRef.current) {\r\n            this.calibrate(this.props)\r\n            this.videoRef.current.play()\r\n            this.setState({\r\n                playing: true\r\n            })\r\n        }\r\n    }\r\n\r\n    pause() {\r\n        if (this.props.name.toString() === observeAt) {\r\n            console.log('李四 pause', this.props)\r\n        }\r\n\r\n        if (this.videoRef.current) {\r\n            this.videoRef.current.pause()\r\n            this.setState({\r\n                playing: false\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 调整播放器时间。\r\n     * 在播放，暂停，以及syncTimestamp发生变化时调整播放器时间\r\n     * @param props \r\n     */\r\n    calibrate(props) {\r\n        const playAt = new Date().valueOf() - props.syncTimestamp + props.syncAt\r\n\r\n        if (this.props.name.toString() === observeAt) {\r\n            console.log('李四 calibrate at', playAt/ 1000, this.props)\r\n            this.printVideoState()\r\n        }\r\n\r\n        if (this.videoRef.current) {\r\n            if (props.playing) {\r\n                this.videoRef.current.play()\r\n            }\r\n            this.videoRef.current.currentTime = playAt / 1000\r\n        }\r\n    }\r\n\r\n    setPlaySpeed(speed) {\r\n        if (this.state.speed !== speed) {\r\n            this.setState({\r\n                speed\r\n            })\r\n            if (this.videoRef.current) {\r\n                this.videoRef.current.playbackRate = speed\r\n            }\r\n        }\r\n    }\r\n\r\n    handleToggleVideo = () => {\r\n        this.setState({\r\n            videoOn: !this.state.videoOn\r\n        })\r\n    }\r\n\r\n    handleToggleAudio = () => {\r\n        this.setState({\r\n            audioOn: !this.state.audioOn\r\n        }, () => {\r\n            if (this.videoRef.current) {\r\n                this.videoRef.current.muted = this.state.audioOn ? false : true\r\n            }\r\n        })\r\n    }\r\n\r\n    handleWait = () => {\r\n        if (this.props.name.toString() === observeAt) {\r\n            console.log('李四 wait')\r\n        }\r\n\r\n        this.props.onWait()\r\n    }\r\n\r\n    handleCanPlay = () => {\r\n        if (this.props.name.toString() === observeAt) {\r\n            console.log('李四 play')\r\n        }\r\n        this.props.onCanPlay()\r\n    }\r\n\r\n    printVideoState = () => {\r\n        if (this.videoRef.current) {\r\n            console.log('李四 currTime', this.videoRef.current.currentTime)\r\n            console.log('李四 paused', this.videoRef.current.paused)\r\n            console.log('李四 ended', this.videoRef.current.ended)\r\n            console.log('李四 readyState', this.videoRef.current.readyState)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.props.name.toString() === observeAt) {\r\n            console.log('李四 props')\r\n        }\r\n        const hidden = !this.state.videoOn\r\n        const { needControl = true} = this.props;\r\n        return (\r\n            <div className='videobox'>\r\n                <video\r\n                    ref={this.videoRef as RefObject<HTMLVideoElement>}\r\n                    onWaiting={this.handleWait}\r\n                    onCanPlay={this.handleCanPlay}\r\n                    src={this.props.url}\r\n                    muted={!this.state.audioOn || this.props.hidden}\r\n                    style={{\r\n                        width: '100%',\r\n                        visibility: hidden ? 'hidden' : 'visible'\r\n                    }}\r\n                />\r\n                {hidden && \r\n                    <div className='video-black' />\r\n                }\r\n                {needControl && this.renderControls()}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderControls() {\r\n        const name = this.props.name + (this.props.role  === 'teacher' ? '(教师)' : '')\r\n        const videoClassNameSuffix = this.state.videoOn ? '' : ' off'\r\n        const audioClassNameSuffix = this.state.audioOn ? '' : ' off'\r\n        return (\r\n            <div className='controls'>\r\n                <div className='name'>{name}</div>\r\n                <div className='ctrl'>\r\n                    <div className={'video icon' + videoClassNameSuffix} onClick={this.handleToggleVideo}></div>\r\n                    <div className={'audio icon' + audioClassNameSuffix} onClick={this.handleToggleAudio}></div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport { ITrack } from './Replay'\r\nimport VideoBox from './VideoBox'\r\n\r\ninterface IProps {\r\n    videoWidth: number\r\n    currTime: number\r\n    videos: Array<ITrack>\r\n    playing: boolean\r\n    onWait: Function\r\n    onCanPlay: Function\r\n    beginOffset: number\r\n    /**\r\n     * 上一次校准的播放位置\r\n     */\r\n    syncAt: number\r\n    /**\r\n     * 上一次校准时的绝对时间\r\n     * 目前视频文件的播放位置应为 new Date().valueOf() - syncTimestamp + syncAt\r\n     * \r\n     * 校准时间点为play, pause\r\n     */\r\n    syncTimestamp: number\r\n    speed: number\r\n    visibleVIds: Array<string>\r\n    showIds: Array<string>\r\n}\r\n\r\nexport default class VideoGroup extends React.Component<IProps> {\r\n    waitSet: Set<string> = new Set()\r\n\r\n    handleWait = (id: string) => {\r\n        if (!this.waitSet.has(id)) {\r\n            this.waitSet.add(id)\r\n            if (this.waitSet.size === 1) {\r\n                this.props.onWait()\r\n            }\r\n        }\r\n    }\r\n\r\n    handleCanPlay = (id: string) => {\r\n        if (this.waitSet.has(id)) {\r\n            this.waitSet.delete(id)\r\n            if (this.waitSet.size === 0) {\r\n                this.props.onCanPlay()\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <div className='main-video' style={{\r\n                width: this.props.videoWidth + 20\r\n            }}>\r\n                {this.props.videos.map(v => {\r\n                    return (\r\n                        <>\r\n                            {this.props.showIds.includes(v.id) && <div\r\n                                key={v.id} \r\n                                style={{\r\n                                    marginBottom: 10,\r\n                                }}\r\n                                >\r\n                                <VideoBox\r\n                                    playing={this.props.playing}\r\n                                    url={v.url}\r\n                                    name={v.name}\r\n                                    role={v.role}\r\n                                    hidden={!this.props.visibleVIds.includes(v.id)}\r\n                                    speed={this.props.speed}\r\n                                    syncAt={this.props.syncAt - (v.start - this.props.beginOffset)}\r\n                                    syncTimestamp={this.props.syncTimestamp}\r\n                                    onWait={() => this.handleWait(v.id)}\r\n                                    onCanPlay={() => this.handleCanPlay(v.id)}\r\n                                />\r\n                            </div>}\r\n                        </>\r\n                    )\r\n                })}\r\n            </div>\r\n        )\r\n    }\r\n}","/**\r\n * 滴答滴答报时器。\r\n * \r\n * 处于play状态时，每隔一段时间会向外发送tick事件。\r\n */\r\n\r\nimport { EventEmitter } from \"eventemitter3\";\r\n\r\ninterface TickTickEvent {\r\n  tick: [number]\r\n  pause: [],\r\n  play: []\r\n}\r\n\r\nexport const DEFAULT_INTERVAL = 10\r\n\r\nexport default class TickTick extends EventEmitter<TickTickEvent> {\r\n  timer?: ReturnType<typeof setInterval>;\r\n  state: 'pause' | 'play' = 'pause'\r\n  //currTimeStamp是相对于最早Track的起始时间偏移量\r\n  currTimeStamp: number = 0;\r\n  //lastRealTime是上一次记录的真实时间\r\n  lastRealTime: number | undefined = undefined\r\n  rate: number = 1\r\n\r\n  destory() {\r\n    this.pause()\r\n    this.eventNames().forEach(name => this.off(name))\r\n  }\r\n\r\n  microTask = () => {\r\n    if (this.state === 'play') {\r\n      this.tick()\r\n    }\r\n  }\r\n\r\n  private tick() {\r\n    let now = Date.now();\r\n    if (this.lastRealTime === undefined) {\r\n      this.lastRealTime = now\r\n      return\r\n    } else {\r\n      let passedGap = ((now - this.lastRealTime) * this.rate)\r\n      this.currTimeStamp = this.currTimeStamp + passedGap;\r\n      this.lastRealTime = now\r\n      this.emit('tick', this.currTimeStamp)\r\n    }\r\n  }\r\n\r\n  pause() {\r\n    if (this.timer) {\r\n      window.clearInterval(this.timer)\r\n    }\r\n    this.timer = undefined\r\n    this.lastRealTime = undefined\r\n\r\n    this.state = 'pause';\r\n    this.emit('pause')\r\n  }\r\n\r\n  play() {\r\n    if (!this.timer) {\r\n      this.timer = setInterval(this.microTask, DEFAULT_INTERVAL)\r\n    }\r\n    this.state = 'play'\r\n    this.emit('play')\r\n  }\r\n\r\n  setCurrentTime(timeStamp: number = 0) {\r\n    this.currTimeStamp = timeStamp\r\n    this.lastRealTime = undefined\r\n    this.emit('tick', this.currTimeStamp)\r\n  }\r\n}","const p0 = (n: number) => n < 10 ? '0' + n : '' + n\r\nexport const getTime = (n: number, showHour: boolean = false): [string, number] => {\r\n  n = ~~(n / 1000)\r\n  let second = n % 60;\r\n  n -= second;\r\n  n = ~~(n / 60) // 有多少分钟\r\n  let minute = (n % 60)// \r\n  let hour = ~~(n / 60)\r\n\r\n  if (hour === 0 && showHour === false) {\r\n    return [`${p0(minute)}:${p0(second)}`, hour]\r\n  }\r\n  return [`${hour}:${p0(minute)}:${p0(second)}`, hour]\r\n}\r\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]); if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    // eslint-disable-next-line no-param-reassign\n    options = {};\n  } // eslint-disable-next-line no-underscore-dangle, no-param-reassign\n\n\n  url = url && url.__esModule ? url.default : url;\n\n  if (typeof url !== \"string\") {\n    return url;\n  } // If url is already wrapped in quotes, remove them\n\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    // eslint-disable-next-line no-param-reassign\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    // eslint-disable-next-line no-param-reassign\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n\n  return url;\n};","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".player-container {\\n  display: block;\\n  position: relative;\\n  height: 30px;\\n  background: rgba(113, 113, 113, 0.23);\\n  user-select: none;\\n  display: flex;\\n  padding: 0 10px 0 5px;\\n}\\n.player-container .player-play-icon-wrapper {\\n  cursor: pointer;\\n  position: relative;\\n  width: 20px;\\n  height: 20px;\\n  padding: 5px;\\n}\\n.player-container .player-play-icon-wrapper .player-play-icon {\\n  display: inline-block;\\n  height: inherit;\\n  width: inherit;\\n  background-size: cover;\\n}\\n.player-container .player-speed {\\n  padding: 5px;\\n  height: 20px;\\n  font-size: 14px;\\n  font-family: sans-serif;\\n  cursor: pointer;\\n}\\n.player-container .player-speed .player-speed-text {\\n  text-align: center;\\n}\\n.player-container .player-speed .player-speed-options {\\n  position: absolute;\\n  bottom: 27px;\\n  background: rgba(0, 0, 0, 0.8);\\n  padding: 0 10px;\\n  color: white;\\n  text-align: center;\\n}\\n.player-container .player-speed .player-speed-options .option {\\n  margin: 10px 0;\\n}\\n.player-container .player-duration {\\n  height: 20px;\\n  font-size: 14px;\\n  font-family: sans-serif;\\n  padding: 5px;\\n}\\n.player-container .player-timeline {\\n  flex: 1;\\n  height: 6px;\\n  cursor: pointer;\\n  background: rgba(0, 0, 0, 0.12);\\n  margin: 12px;\\n  position: relative;\\n}\\n.player-container .player-timeline-label {\\n  position: absolute;\\n  height: 20px;\\n  background: white;\\n  border-radius: 3px;\\n  bottom: 10px;\\n  padding: 4px 6px;\\n  transform: translateX(-50%);\\n}\\n.player-container .player-timeline-bg {\\n  position: absolute;\\n  height: 20px;\\n  background: 'white';\\n  width: 2px;\\n  bottom: -5px;\\n  pointer-events: none;\\n}\\n.player-container .player-timeline-blueline {\\n  position: absolute;\\n  background: rgba(24, 121, 226, 0.7);\\n  height: inherit;\\n  pointer-events: none;\\n}\\n.player-container .player-timeline-slider {\\n  position: absolute;\\n  top: -5px;\\n  bottom: -5px;\\n  background: white;\\n  box-sizing: content-box;\\n  padding: 0 4px;\\n  width: 4px;\\n  transform: translateX(-6px);\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/component/Control.less\"],\"names\":[],\"mappings\":\"AAAA;EACI,cAAA;EACA,kBAAA;EACA,YAAA;EACA,qCAAA;EACA,iBAAA;EACA,aAAA;EACA,qBAAA;AACJ;AARA;EAUQ,eAAA;EACA,kBAAA;EACA,WAAA;EACA,YAAA;EACA,YAAA;AACR;AAfA;EAiBY,qBAAA;EACA,eAAA;EACA,cAAA;EACA,sBAAA;AACZ;AArBA;EAyBQ,YAAA;EACA,YAAA;EACA,eAAA;EACA,uBAAA;EACA,eAAA;AADR;AA5BA;EAgCY,kBAAA;AADZ;AA/BA;EAoCY,kBAAA;EACA,YAAA;EACA,8BAAA;EACA,eAAA;EACA,YAAA;EACA,kBAAA;AAFZ;AAvCA;EA4CgB,cAAA;AAFhB;AA1CA;EAkDQ,YAAA;EACA,eAAA;EACA,uBAAA;EACA,YAAA;AALR;AAhDA;EAyDQ,OAAA;EACA,WAAA;EACA,eAAA;EACA,+BAAA;EACA,YAAA;EACA,kBAAA;AANR;AAxDA;EAkEQ,kBAAA;EACA,YAAA;EACA,iBAAA;EACA,kBAAA;EACA,YAAA;EACA,gBAAA;EACA,2BAAA;AAPR;AAjEA;EA4EQ,kBAAA;EACA,YAAA;EACA,mBAAA;EACA,UAAA;EACA,YAAA;EACA,oBAAA;AARR;AAzEA;EAqFQ,kBAAA;EACA,mCAAA;EACA,eAAA;EACA,oBAAA;AATR;AA/EA;EA4FQ,kBAAA;EACA,SAAA;EACA,YAAA;EACA,iBAAA;EACA,uBAAA;EACA,cAAA;EACA,UAAA;EACA,2BAAA;AAVR\",\"sourcesContent\":[\".player-container {\\n    display: block;\\n    position: relative;\\n    height: 30px;\\n    background: rgba(113, 113, 113, 0.23);\\n    user-select: none;\\n    display: flex;\\n    padding: 0 10px 0 5px;\\n\\n    .player-play-icon-wrapper {\\n        cursor: pointer;\\n        position: relative;\\n        width: 20px;\\n        height: 20px;\\n        padding: 5px;\\n\\n        .player-play-icon {\\n            display:inline-block;\\n            height:inherit;\\n            width:inherit;\\n            background-size:cover;\\n        }\\n    }\\n\\n    .player-speed {\\n        padding: 5px;\\n        height: 20px;\\n        font-size: 14px;\\n        font-family: sans-serif;\\n        cursor: pointer;\\n\\n        .player-speed-text {\\n            text-align: center;\\n        }\\n\\n        .player-speed-options {\\n            position: absolute;\\n            bottom: 27px;\\n            background: rgba(0,0,0,.8);\\n            padding: 0 10px;\\n            color: white;\\n            text-align: center;\\n\\n            .option {\\n                margin: 10px 0;\\n            }\\n        }\\n    }\\n\\n    .player-duration {\\n        height:20px;\\n        font-size:14px;\\n        font-family:sans-serif;\\n        padding: 5px;\\n    }\\n\\n    .player-timeline {\\n        flex: 1;\\n        height: 6px;\\n        cursor: pointer;\\n        background: rgba(0,0,0,0.12);\\n        margin: 12px;\\n        position: relative;\\n    }\\n\\n    .player-timeline-label {\\n        position: absolute;\\n        height: 20px;\\n        background: white;\\n        border-radius: 3px;\\n        bottom: 10px;\\n        padding: 4px 6px;\\n        transform: translateX(-50%);\\n    }\\n\\n    .player-timeline-bg {\\n        position: absolute;\\n        height: 20px;\\n        background: 'white';\\n        width: 2px;\\n        bottom: -5px;\\n        pointer-events: none;\\n    }\\n\\n    .player-timeline-blueline {\\n        position: absolute;\\n        background: rgba(24, 121, 226, 0.7);\\n        height: inherit;\\n        pointer-events: none;\\n    }\\n\\n    .player-timeline-slider {\\n        position: absolute;\\n        top: -5px;\\n        bottom: -5px;\\n        background: white;\\n        box-sizing: content-box;\\n        padding:0 4px;\\n        width: 4px;\\n        transform:translateX(-6px);\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".replay-div {\\n  height: 100%;\\n}\\n.replay-div div {\\n  box-sizing: border-box;\\n}\\n.replay-div .main {\\n  height: calc(100% - 45px);\\n  position: relative;\\n}\\n.replay-div .main .main-wb {\\n  padding: 10px;\\n  height: 100%;\\n  display: inline-block;\\n}\\n.replay-div .main .main-video {\\n  overflow: auto;\\n  padding: 10px;\\n  height: 100%;\\n  display: inline-flex;\\n  flex-direction: column;\\n  vertical-align: top;\\n}\\n.replay-div .main .screen-share {\\n  position: absolute;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n  overflow: hidden;\\n}\\n.replay-div .main .screen-share .videobox {\\n  width: 100%;\\n  height: 100%;\\n  padding: 10px;\\n}\\n.replay-div .main .screen-share .videobox video {\\n  height: 100%;\\n  background: #000;\\n}\\n.replay-div .footer {\\n  width: 100%;\\n  height: 34px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/component/Replay.less\"],\"names\":[],\"mappings\":\"AAAA;EACI,YAAA;AACJ;AAFA;EAIQ,sBAAA;AACR;AALA;EAQQ,yBAAA;EACA,kBAAA;AAAR;AATA;EAWY,aAAA;EACA,YAAA;EACA,qBAAA;AACZ;AAdA;EAiBY,cAAA;EACA,aAAA;EACA,YAAA;EACA,oBAAA;EACA,sBAAA;EACA,mBAAA;AAAZ;AAtBA;EAyBY,kBAAA;EACA,YAAA;EACA,OAAA;EACA,MAAA;EACA,gBAAA;AAAZ;AA7BA;EA+BgB,WAAA;EACA,YAAA;EACA,aAAA;AAChB;AAlCA;EAmCoB,YAAA;EACA,gBAAA;AAEpB;AAtCA;EA2CQ,WAAA;EACA,YAAA;AAFR\",\"sourcesContent\":[\".replay-div {\\n    height: 100%;\\n\\n    div {\\n        box-sizing: border-box;\\n    }\\n\\n    .main {\\n        height: calc(100% - 45px);\\n        position: relative;\\n        .main-wb {\\n            padding: 10px;\\n            height: 100%;\\n            display: inline-block;\\n        }\\n\\n        .main-video {\\n            overflow: auto;\\n            padding: 10px;\\n            height: 100%;\\n            display: inline-flex;\\n            flex-direction: column;\\n            vertical-align: top;\\n        }\\n        .screen-share{\\n            position: absolute;\\n            height: 100%;\\n            left: 0;\\n            top: 0;\\n            overflow: hidden;\\n            .videobox{\\n                width: 100%;\\n                height: 100%;\\n                padding: 10px;\\n                video{\\n                    height: 100%;\\n                    background: #000;\\n                }\\n            }\\n        }\\n    }\\n\\n    .footer {\\n        width: 100%;\\n        height: 34px;\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/getUrl.js\";\nimport ___CSS_LOADER_URL_IMPORT_0___ from \"../assets/video.svg\";\nimport ___CSS_LOADER_URL_IMPORT_1___ from \"../assets/audio.svg\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".videobox {\\n  position: relative;\\n}\\n.videobox .video-black {\\n  background: black;\\n  position: absolute;\\n  top: 0;\\n  width: 100%;\\n  bottom: 32px;\\n}\\n.videobox .controls {\\n  height: 30px;\\n  background-color: rgba(0, 0, 0, 0.4);\\n  position: relative;\\n  top: -5px;\\n  color: white;\\n}\\n.videobox .controls .name {\\n  position: absolute;\\n  left: 3px;\\n  line-height: 30px;\\n}\\n.videobox .controls .ctrl {\\n  position: absolute;\\n  line-height: 30px;\\n  right: 3px;\\n}\\n.videobox .controls .ctrl .icon {\\n  width: 30px;\\n  height: 30px;\\n  display: inline-block;\\n  background-repeat: no-repeat;\\n  background-position: center;\\n  position: relative;\\n}\\n.videobox .controls .ctrl .icon:hover {\\n  cursor: pointer;\\n}\\n.videobox .controls .ctrl .off::after {\\n  content: \\\"\\\";\\n  background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE5NDIwODAxNzQ4IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjExMzQiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMjIyLjYzNDY2NyAyNzIuMjk4NjY3QTM4Mi40IDM4Mi40IDAgMCAwIDEzOC42NjY2NjcgNTEyYzAgMjEyLjExNzMzMyAxNzEuOTA0IDM4NCAzODQgMzg0IDkwLjY2NjY2NyAwIDE3NC4wMTYtMzEuNDI0IDIzOS43MDEzMzMtODMuOTY4bC01MzkuNzMzMzMzLTUzOS43MzMzMzN6IG02MC4zMzA2NjYtNjAuMzMwNjY3bDUzOS43MzMzMzQgNTM5LjczMzMzM0EzODIuNCAzODIuNCAwIDAgMCA5MDYuNjY2NjY3IDUxMmMwLTIxMi4xMTczMzMtMTcxLjkwNC0zODQtMzg0LTM4NC05MC42NjY2NjcgMC0xNzQuMDE2IDMxLjQyNC0yMzkuNzAxMzM0IDgzLjk2OHpNNTMuMzMzMzMzIDUxMmMwLTI1OS4yMjEzMzMgMjEwLjA5MDY2Ny00NjkuMzMzMzMzIDQ2OS4zMzMzMzQtNDY5LjMzMzMzMyAyNTkuMjIxMzMzIDAgNDY5LjMzMzMzMyAyMTAuMDkwNjY3IDQ2OS4zMzMzMzMgNDY5LjMzMzMzMyAwIDI1OS4yMjEzMzMtMjEwLjA5MDY2NyA0NjkuMzMzMzMzLTQ2OS4zMzMzMzMgNDY5LjMzMzMzMy0yNTkuMjIxMzMzIDAtNDY5LjMzMzMzMy0yMTAuMDkwNjY3LTQ2OS4zMzMzMzQtNDY5LjMzMzMzM3oiIHAtaWQ9IjExMzUiPjwvcGF0aD48L3N2Zz4=);\\n  position: absolute;\\n  width: 18px;\\n  height: 18px;\\n  left: 50%;\\n  top: 50%;\\n  transform: translate(-50%, -50%);\\n  background-size: contain;\\n  background-position: center;\\n  background-repeat: no-repeat;\\n}\\n.videobox .controls .ctrl .video {\\n  background-image: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");\\n}\\n.videobox .controls .ctrl .audio {\\n  background-image: url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \");\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/component/VideoBox.less\"],\"names\":[],\"mappings\":\"AAEA;EACI,kBAAA;AADJ;AAAA;EAIQ,iBAAA;EACA,kBAAA;EACA,MAAA;EACA,WAAA;EACA,YAAA;AADR;AAPA;EAYQ,YAAA;EACA,oCAAA;EACA,kBAAA;EACA,SAAA;EACA,YAAA;AAFR;AAdA;EAmBY,kBAAA;EACA,SAAA;EACA,iBAAA;AAFZ;AAnBA;EAyBY,kBAAA;EACA,iBAAA;EACA,UAAA;AAHZ;AAxBA;EA6BgB,WAAA;EACA,YAAA;EACA,qBAAA;EACA,4BAAA;EACA,2BAAA;EACA,kBAAA;AAFhB;AAGgB;EACI,eAAA;AADpB;AAnCA;EAyCgB,WAAA;EACA,izCAAA;EACA,kBAAA;EACA,WAAA;EACA,YAAA;EACA,SAAA;EACA,QAAA;EACA,gCAAA;EACA,wBAAA;EACA,2BAAA;EACA,4BAAA;AAHhB;AAhDA;EAuDgB,yDAAA;AAJhB;AAnDA;EA2DgB,yDAAA;AALhB\",\"sourcesContent\":[\"@controlHeight: 30px;\\n\\n.videobox {\\n    position: relative;\\n\\n    .video-black {\\n        background: black;\\n        position: absolute;\\n        top: 0;\\n        width: 100%;\\n        bottom: 32px;\\n    }\\n\\n    .controls {\\n        height: @controlHeight;\\n        background-color: rgba(0,0,0,.4);\\n        position: relative;\\n        top: -5px;\\n        color: white;\\n\\n        .name {\\n            position: absolute;\\n            left: 3px;\\n            line-height: @controlHeight;\\n        }\\n\\n        .ctrl {\\n            position: absolute;\\n            line-height: @controlHeight;\\n            right: 3px;\\n            .icon {\\n                width: @controlHeight;\\n                height: @controlHeight;\\n                display: inline-block;\\n                background-repeat: no-repeat;\\n                background-position: center;\\n                position: relative;\\n                &:hover {\\n                    cursor: pointer;\\n                }\\n            }\\n\\n            .off::after {\\n                content: \\\"\\\";\\n                background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE5NDIwODAxNzQ4IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjExMzQiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMjIyLjYzNDY2NyAyNzIuMjk4NjY3QTM4Mi40IDM4Mi40IDAgMCAwIDEzOC42NjY2NjcgNTEyYzAgMjEyLjExNzMzMyAxNzEuOTA0IDM4NCAzODQgMzg0IDkwLjY2NjY2NyAwIDE3NC4wMTYtMzEuNDI0IDIzOS43MDEzMzMtODMuOTY4bC01MzkuNzMzMzMzLTUzOS43MzMzMzN6IG02MC4zMzA2NjYtNjAuMzMwNjY3bDUzOS43MzMzMzQgNTM5LjczMzMzM0EzODIuNCAzODIuNCAwIDAgMCA5MDYuNjY2NjY3IDUxMmMwLTIxMi4xMTczMzMtMTcxLjkwNC0zODQtMzg0LTM4NC05MC42NjY2NjcgMC0xNzQuMDE2IDMxLjQyNC0yMzkuNzAxMzM0IDgzLjk2OHpNNTMuMzMzMzMzIDUxMmMwLTI1OS4yMjEzMzMgMjEwLjA5MDY2Ny00NjkuMzMzMzMzIDQ2OS4zMzMzMzQtNDY5LjMzMzMzMyAyNTkuMjIxMzMzIDAgNDY5LjMzMzMzMyAyMTAuMDkwNjY3IDQ2OS4zMzMzMzMgNDY5LjMzMzMzMyAwIDI1OS4yMjEzMzMtMjEwLjA5MDY2NyA0NjkuMzMzMzMzLTQ2OS4zMzMzMzMgNDY5LjMzMzMzMy0yNTkuMjIxMzMzIDAtNDY5LjMzMzMzMy0yMTAuMDkwNjY3LTQ2OS4zMzMzMzQtNDY5LjMzMzMzM3oiIHAtaWQ9IjExMzUiPjwvcGF0aD48L3N2Zz4=);\\n                position: absolute;\\n                width: 18px;\\n                height: 18px;\\n                left: 50%;\\n                top: 50%;\\n                transform: translate(-50%, -50%);\\n                background-size: contain;\\n                background-position: center;\\n                background-repeat: no-repeat;\\n            }\\n\\n            .video {\\n                background-image: url(../assets/video.svg);\\n            }\\n\\n            .audio {\\n                background-image: url(../assets/audio.svg);\\n            }\\n        }\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../node_modules/less-loader/dist/cjs.js!./Control.less\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../node_modules/less-loader/dist/cjs.js!./Replay.less\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../node_modules/less-loader/dist/cjs.js!./VideoBox.less\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJzdmctaWNvbiIgdmlld0JveD0iNjQgNjQgODk2IDg5NiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBzdHlsZT0iZmlsbDogcmdiKDI1NSwgMjU1LCAyNTUpOyI+PHBhdGggZD0iTTUxMiA2MjRjOTMuOSAwIDE3MC03NS4yIDE3MC0xNjhWMjMyYzAtOTIuOC03Ni4xLTE2OC0xNzAtMTY4cy0xNzAgNzUuMi0xNzAgMTY4djIyNGMwIDkyLjggNzYuMSAxNjggMTcwIDE2OHptMzMwLTE3MGMwLTQuNC0zLjYtOC04LThoLTYwYy00LjQgMC04IDMuNi04IDggMCAxNDAuMy0xMTMuNyAyNTQtMjU0IDI1NFMyNTggNTk0LjMgMjU4IDQ1NGMwLTQuNC0zLjYtOC04LThoLTYwYy00LjQgMC04IDMuNi04IDggMCAxNjguNyAxMjYuNiAzMDcuOSAyOTAgMzI3LjZWODg0SDMyNi43Yy0xMy43IDAtMjQuNyAxNC4zLTI0LjcgMzJ2MzZjMCA0LjQgMi44IDggNi4yIDhoNDA3LjZjMy40IDAgNi4yLTMuNiA2LjItOHYtMzZjMC0xNy43LTExLTMyLTI0LjctMzJINTQ4Vjc4Mi4xYzE2NS4zLTE4IDI5NC0xNTggMjk0LTMyOC4xeiI+PC9wYXRoPjwvc3ZnPg==\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MTUxOTUxOTYxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI5MDgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMjU5Ljk0NzkyOTA5IDEzMy45MjE4OTNoMTI2LjAyNjAzNDgxYzIzLjMzODE1NDczIDAgNDIuMDA4Njc4MjcgMTguNjcwNTIzNTMgNDIuMDA4Njc5NTcgNDIuMDA4Njc4MjZ2NjcyLjEzODg1NzQ4YzAgMjMuMzM4MTU0NzMtMTguNjcwNTIzNTMgNDIuMDA4Njc4MjctNDIuMDA4Njc5NTcgNDIuMDA4Njc4MjZIMjU5Ljk0NzkyOTA5Yy0yMy4zMzgxNTQ3MyAwLTQyLjAwODY3ODI3LTE4LjY3MDUyMzUzLTQyLjAwODY3OTU2LTQyLjAwODY3ODI2VjE3NS45MzA1NzEyNmMwLTIzLjMzODE1NDczIDE4LjY3MDUyMzUzLTQyLjAwODY3ODI3IDQyLjAwODY3OTU2LTQyLjAwODY3ODI2ek02MzguMDI2MDM2MSAxMzMuOTIxODkzaDEyNi4wMjYwMzQ4MWMyMy4zMzgxNTQ3MyAwIDQyLjAwODY3ODI3IDE4LjY3MDUyMzUzIDQyLjAwODY3OTU2IDQyLjAwODY3ODI2djY3Mi4xMzg4NTc0OGMwIDIzLjMzODE1NDczLTE4LjY3MDUyMzUzIDQyLjAwODY3ODI3LTQyLjAwODY3OTU2IDQyLjAwODY3ODI2aC0xMjYuMDI2MDM0ODFjLTIzLjMzODE1NDczIDAtNDIuMDA4Njc4MjctMTguNjcwNTIzNTMtNDIuMDA4Njc5NTctNDIuMDA4Njc4MjZWMTc1LjkzMDU3MTI2YzAtMjMuMzM4MTU0NzMgMTguNjcwNTIzNTMtNDIuMDA4Njc4MjcgNDIuMDA4Njc5NTctNDIuMDA4Njc4MjZ6IiBmaWxsPSIjZmZmZmZmIiBwLWlkPSIyOTA5Ij48L3BhdGg+PC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE0MTUxOTI0MjE2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjIxMzEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNOTEyLjcyNDg4NCA0MjkuMzU1NjgxTDIwOC43OTc1NDUgMTMuMTk4NjM4QzE1MS42MDM0NDktMjAuNTk3ODc0IDY0LjAxMjQ5IDEyLjE5ODc0MSA2NC4wMTI0OSA5NS43OTAxMTJWOTI3LjkwNDIxOWMwIDc0Ljk5MjI1OSA4MS4zOTE1OTkgMTIwLjE4NzU5NCAxNDQuNzg1MDU1IDgyLjU5MTQ3NWw3MDMuOTI3MzM5LTQxNS45NTcwNjRjNjIuNzkzNTE4LTM2Ljk5NjE4MSA2Mi45OTM0OTgtMTI4LjE4Njc2OCAwLTE2NS4xODI5NDl6IiBmaWxsPSIjZmZmZmZmIiBwLWlkPSIyMTMyIj48L3BhdGg+PC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJzdmctaWNvbiIgdmlld0JveD0iNjQgNjQgODk2IDg5NiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBzdHlsZT0iZmlsbDogcmdiKDI1NSwgMjU1LCAyNTUpOyI+PHBhdGggZD0iTTkxMiAzMDIuM0w3ODQgMzc2VjIyNGMwLTM1LjMtMjguNy02NC02NC02NEgxMjhjLTM1LjMgMC02NCAyOC43LTY0IDY0djU3NmMwIDM1LjMgMjguNyA2NCA2NCA2NGg1OTJjMzUuMyAwIDY0LTI4LjcgNjQtNjRWNjQ4bDEyOCA3My43YzIxLjMgMTIuMyA0OC0zLjEgNDgtMjcuNlYzMzBjMC0yNC42LTI2LjctNDAtNDgtMjcuN3pNMzI4IDM1MmMwIDQuNC0zLjYgOC04IDhIMjA4Yy00LjQgMC04LTMuNi04LTh2LTQ4YzAtNC40IDMuNi04IDgtOGgxMTJjNC40IDAgOCAzLjYgOCA4djQ4em01NjAgMjczbC0xMDQtNTkuOFY0NTguOUw4ODggMzk5djIyNnoiPjwvcGF0aD48L3N2Zz4=\"","module.exports = __WEBPACK_EXTERNAL_MODULE_RecordPlayer__;","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import React from 'react'\r\nimport RecordPlayer from 'RecordPlayer'\r\nimport TickTick from '../utils/TickTick'\r\n\r\nimport Control from './Control'\r\n\r\nimport './Replay.less'\r\nimport VideoGroup from './VideoGroup'\r\nimport VideoBox from './VideoBox'\r\n\r\nenum SceneTypes {\r\n    ONE_TO_ONE = \"EDU.1V1\",\r\n    SMALL = \"EDU.SMALL\",\r\n    BIG = \"EDU.BIG\",\r\n}\r\ninterface IProps {\r\n    config: {\r\n        videoWidth: number\r\n    }\r\n    store : {\r\n        videoTracks: Array<ITrack>\r\n        wbTracks: Array<ITrack>\r\n        events: Array<IEvent>\r\n        screenTracks: Array<ITrack>\r\n        record: {\r\n            classBeginTimestamp: number\r\n            classEndTimestamp: number\r\n            recordId: string\r\n            roomCid: string\r\n            roomUuid: string\r\n            startTime: number\r\n        }\r\n        sceneType: SceneTypes\r\n    }\r\n}\r\n\r\ninterface IState {\r\n    playing: boolean,\r\n    /**\r\n     * 单位ms，对应控制条上时间。起始为0，对应的为tracks中最小的start。\r\n     */\r\n    currTime: number,\r\n    /**\r\n     * 等于tracks中最小的start\r\n     */\r\n    beginAt: number,\r\n    endAt: number,\r\n    speed: number,\r\n    wait: boolean,\r\n    /**\r\n     * 和currTime单位量纲相同。videobox根据syncAt, syncTimestamp, 以及当前时间确定是否同步\r\n     */\r\n    syncAt: number,\r\n    syncTimestamp: number\r\n}\r\n\r\nexport interface ITrack {\r\n    id: string\r\n    userId: string,\r\n    name: string,\r\n    role: 'student' | 'teacher' | 'host' | 'audience'\r\n    url: string,\r\n    type: 'video' | 'whiteboard' | 'screen'\r\n    start: number,\r\n    end: number,\r\n    payload?: any,\r\n    subStream?: boolean\r\n}\r\n\r\nexport interface IEvent {\r\n    userId: string\r\n    action: 'show' | 'hide' | 'showScreen' | 'remove',\r\n    timestamp: number,\r\n    payload?: any\r\n}\r\n\r\nexport default class Replay extends React.Component<IProps, IState> {\r\n    player: any\r\n    ticktick: TickTick | undefined\r\n    /**\r\n     * 白板的起始时间，seekTo的时候要减去这个时间。因为白板seekTo 0对应的位置为整体播放时的wbBeginOffset的位置\r\n     */\r\n    wbBegin: number = 0\r\n    wbEnd: number = 0\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        const store = props.store\r\n        // const beginAt = store.wbTracks.concat(store.videoTracks).reduce((prev, track) => {\r\n        //     return Math.min(prev, track.start)\r\n        // }, Number.POSITIVE_INFINITY)\r\n        const beginAt = store.record.startTime;\r\n        const endAt = store.videoTracks.reduce((prev, track) => {\r\n            return Math.max(prev, track.end)\r\n        }, Number.NEGATIVE_INFINITY)\r\n\r\n        if (store.wbTracks.length > 0) {\r\n            // this.wbBegin = store.wbTracks[0].start - beginAt\r\n            // this.wbEnd = store.wbTracks[0].end - beginAt\r\n            this.wbBegin = beginAt;\r\n            this.wbEnd = endAt;\r\n        }\r\n\r\n        store.videoTracks.forEach((t, index) => {\r\n            console.log('视频开始时间', index, t.start - beginAt)\r\n            console.log('视频结束时间', index, t.end - beginAt)\r\n        })\r\n        console.log('白板开始时间', this.wbBegin)\r\n        console.log('白板结束时间', this.wbEnd)\r\n\r\n        console.log('开始和结束时间', beginAt, endAt);\r\n        \r\n\r\n        this.state = {\r\n            playing: false,\r\n            currTime: 0,\r\n            beginAt: beginAt,\r\n            endAt: endAt,\r\n            syncAt: 0,\r\n            syncTimestamp: new Date().valueOf(),\r\n            speed: 1,\r\n            wait: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const store = this.props.store\r\n        const wbUrls = store.wbTracks.map(t => {\r\n            return t.url\r\n        })\r\n\r\n        console.log(\"RecordPlayer\", RecordPlayer);\r\n        RecordPlayer.getInstance({\r\n            whiteboardParams: {\r\n                urlArr: wbUrls,\r\n                container: document.getElementById('whiteboard-container')\r\n            }\r\n        }).then(({player}) => {\r\n            this.player = player\r\n            this.ticktick = new TickTick()\r\n            this.ticktick.on('tick', (time) => {\r\n                this.player.seekTo(time)\r\n                this.setState({\r\n                    currTime: time\r\n                })\r\n                if (time > this.state.endAt - this.state.beginAt) {\r\n                    this.handlePause();\r\n                }\r\n            })\r\n            player.setTimeRange(this.state.beginAt)\r\n        })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.ticktick?.destory()\r\n    }\r\n\r\n    /**\r\n     * 获取时间time时，正在播放，且根据各种事件，应该被播放的视频文件\r\n     * @param time \r\n     */\r\n    getVideosOfMoment(time: number, isScreen = false) {\r\n        const store = this.props.store\r\n        const arr = isScreen ? store.screenTracks : store.videoTracks;\r\n        const visibleVIds = arr.filter(t => {\r\n            const inRange = (time >= t.start) && (time <= t.end)\r\n            if (!inRange) {\r\n                return false\r\n            } else {\r\n                //看看是否因为进出事件，导致视频不应该播放\r\n                const events = store.events.filter(ev => ev.userId == t.userId && ev.timestamp <= time && (isScreen ? t.subStream : !t.subStream))\r\n                if (events.length > 0 && isScreen) {\r\n                    return events[events.length - 1].action === (isScreen ? 'showScreen' :'show')\r\n                } else {\r\n                    return isScreen ? false : true;\r\n                }\r\n            }\r\n        }).map(t => t.id)\r\n        return visibleVIds\r\n    }\r\n\r\n    /**\r\n     * 获取时间time时，正在播放，且根据各种事件，应该被播放的视频文件\r\n     * @param time \r\n     */\r\n     getShowVideosOfMoment(time: number) {\r\n        const store = this.props.store\r\n        const arr = store.videoTracks;\r\n        const visibleVIds = arr.filter(t => {\r\n            const inRange = (time >= t.start) && (time <= t.end)\r\n            if (!inRange) {\r\n                return SceneTypes.BIG === store.sceneType && t.role === 'host'\r\n            } else {\r\n                //看看是否因为进出事件，导致视频不应该播放\r\n                const events = store.events.filter(ev => ev.userId == t.userId && ev.timestamp <= time)\r\n                if (SceneTypes.BIG === store.sceneType && t.role === 'host') {\r\n                    return true\r\n                } else if (SceneTypes.BIG !== store.sceneType) {\r\n                    return true;\r\n                } else if (events.length > 0) {\r\n                    return events[events.length - 1].action !== 'remove'\r\n                } else {\r\n                    return false;\r\n                }\r\n            }\r\n        }).map(t => t.id)\r\n        return visibleVIds\r\n    }\r\n\r\n    handlePlay = () => {\r\n        this.setState({\r\n            playing: true,\r\n            syncAt: this.state.currTime,\r\n            syncTimestamp: new Date().valueOf()\r\n        }, () => {\r\n            if (this.checkSecond(this.state.currTime) >= this.checkSecond(this.state.endAt - this.state.beginAt)) {\r\n                this.ticktick?.setCurrentTime(0)\r\n                this.setState({\r\n                    currTime: 0,\r\n                    syncAt: 0,\r\n                    syncTimestamp: new Date().valueOf()\r\n                })\r\n            }\r\n        })\r\n        this.ticktick?.play()\r\n    }\r\n\r\n    handlePause = () => {\r\n        this.setState({\r\n            playing: false,\r\n            syncAt: this.state.currTime,\r\n            syncTimestamp: new Date().valueOf()\r\n        })\r\n        console.log('handlePause time', this.state.currTime);\r\n        \r\n        this.ticktick?.pause()\r\n    }\r\n\r\n    handleSetSpeed = (speed: number) => {\r\n        this.setState({\r\n            speed: speed\r\n        })\r\n        if (this.ticktick) {\r\n            this.ticktick.rate = speed\r\n        }\r\n    }\r\n\r\n    handleSeekTo = (time: number) => {\r\n        if (this.ticktick) {\r\n            this.ticktick.setCurrentTime(time)\r\n        }\r\n        this.setState({\r\n            currTime: time,\r\n            syncAt: time,\r\n            syncTimestamp: new Date().valueOf()\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 视频文件缓冲中\r\n     */\r\n    handleWait = () => {\r\n        this.setState({\r\n            wait: true\r\n        })\r\n        this.ticktick?.pause()\r\n    }\r\n\r\n    /**\r\n     * 缓冲数据加载了一部分。如果目前正在等待缓冲数据，且处于播放状态，则改为播放\r\n     */\r\n    handleCanPlay = () => {\r\n        if (this.state.wait === true) {\r\n            this.setState({\r\n                wait: false\r\n            })\r\n            if (this.state.playing) {\r\n                this.ticktick?.play()\r\n            }\r\n        }\r\n    }\r\n\r\n    checkSecond(num) {\r\n        return Math.floor(num / 1000);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='replay-div'>\r\n                <div className='main'>\r\n                    {this.renderWhiteboard()}\r\n                    {this.renderScreenGroup()}\r\n                    {this.renderVideoGroup()}\r\n                </div>\r\n                {this.renderControls()}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderWhiteboard() {\r\n        return (\r\n            <div className='main-wb' id='whiteboard-container' style={{\r\n                width: `calc(100% - ${this.props.config.videoWidth + 20}px)`\r\n            }}/>\r\n        )\r\n    }\r\n\r\n    renderVideoGroup() {\r\n        const visibleVIds = this.getVideosOfMoment(this.state.currTime + this.state.beginAt)\r\n        const showIds = this.getShowVideosOfMoment(this.state.currTime + this.state.beginAt)\r\n        return <VideoGroup\r\n            beginOffset={this.state.beginAt}\r\n            videoWidth={this.props.config.videoWidth}\r\n            videos={this.props.store.videoTracks}\r\n            currTime={this.state.currTime}\r\n            playing={this.state.playing}\r\n            onWait={this.handleWait}\r\n            onCanPlay={this.handleCanPlay}\r\n            syncAt={this.state.syncAt}\r\n            syncTimestamp={this.state.syncTimestamp}\r\n            speed={this.state.speed}\r\n            visibleVIds={visibleVIds}\r\n            showIds={showIds}\r\n        />\r\n    }\r\n\r\n    renderScreenGroup() {\r\n        const visibleVIds = this.getVideosOfMoment(this.state.currTime + this.state.beginAt, true)\r\n        return this.props.store.screenTracks.length > 0 && visibleVIds.includes(this.props.store.screenTracks[0].id) && <div className=\"screen-share\" style={{\r\n            width: `calc(100% - ${this.props.config.videoWidth + 20}px)`\r\n        }}>\r\n            <VideoBox\r\n                playing={this.state.playing}\r\n                url={this.props.store.screenTracks[0].url}\r\n                name={this.props.store.screenTracks[0].name}\r\n                role={this.props.store.screenTracks[0].role}\r\n                hidden={false}\r\n                speed={this.state.speed}\r\n                syncAt={this.state.syncAt}\r\n                syncTimestamp={this.state.syncTimestamp}\r\n                onWait={this.handleWait}\r\n                onCanPlay={this.handleCanPlay}\r\n                needControl={false}\r\n            />\r\n        </div>\r\n    }\r\n\r\n    renderControls() {\r\n        return (\r\n            <div className='footer'>\r\n                <Control \r\n                    playing={this.state.playing}\r\n                    currTime={this.state.currTime}\r\n                    speed={this.state.speed}\r\n                    start={this.state.beginAt}\r\n                    end={this.state.endAt}\r\n                    onPlay={this.handlePlay}\r\n                    onPause={this.handlePause}\r\n                    onSetSpeed={this.handleSetSpeed}\r\n                    onSeekTo={this.handleSeekTo}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}"],"names":["module","exports","cssWithMappingToString","list","toString","map","item","content","concat","join","i","modules","mediaQuery","dedupe","alreadyImportedModules","length","id","_i","push","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","call","slice","constructor","name","Array","from","test","len","arr2","Symbol","iterator","_arr","_n","_d","_s","_e","next","done","value","err","isArray","_item","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","url","options","__esModule","default","hash","needQuotes","replace","has","hasOwnProperty","prefix","Events","create","__proto__","EE","fn","context","once","addListener","emitter","event","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","eventNames","names","events","getOwnPropertySymbols","listeners","handlers","l","ee","listenerCount","emit","a1","a2","a3","a4","a5","arguments","args","removeListener","undefined","apply","j","on","removeAllListeners","off","prefixed","isOldIE","memo","memorize","Boolean","window","document","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","index","obj","css","media","sourceMap","references","updater","addStyle","insertStyleElement","style","createElement","attributes","nonce","__webpack_nonce__","keys","forEach","key","setAttribute","insert","Error","appendChild","removeStyleElement","parentNode","removeChild","replaceText","textStore","replacement","filter","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","update","styleIndex","bind","updateStyle","newObj","lastIdentifiers","newList","newLastIdentifiers","_identifier","_index","splice"],"sourceRoot":""}